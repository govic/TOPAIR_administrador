"use strict";angular.module("PCMAdministradorApp",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","underscore","naif.base64","MessageCenterModule","ja.qr"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function(a,b,c,d){b.otherwise("/"),c.html5Mode(!0),d.interceptors.push("authInterceptor")}]).factory("authInterceptor",["$rootScope","$q","$cookies","$injector",function(a,b,c,d){var e;return{request:function(a){return a.headers=a.headers||{},c.get("token")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status?((e||(e=d.get("$state"))).go("login"),c.remove("token"),b.reject(a)):b.reject(a)}}}]).directive("isLoading",["$http",function(a){return{restrict:"A",link:function(b,c){b.isLoading=function(){return a.pendingRequests.length>0},b.$watch(b.isLoading,function(a){a?c.show():c.hide()})}}}]).directive("onErrorSrc",function(){return{link:function(a,b,c){b.bind("error",function(){c.src!==c.onErrorSrc&&c.$set("src",c.onErrorSrc)})}}}).directive("deleteOnErrorSrc",function(){return{link:function(a,b){b.bind("error",function(){b.remove()})}}}).run(["$rootScope","$state","Auth",function(a,b,c){a.$on("$stateChangeStart",function(a,d){d.authenticate&&c.isLoggedIn(function(c){c||(a.preventDefault(),b.go("login"))})})}]).constant("config",{time_danger:1e4,time_warning:5e3,time_success:3e3,glosa_empresa:"Topair",url_empresa:"http://www.topair.cl/",correo_empresa:"contacto@topair.cl",direccion_empresa:"Av. Presidente Frei Montalva 6001,  edificio  63. Complejo Industrial El Cortijo. Santiago.",telefono_empresa:"+562-2624 3371",glosa_aplicacion:"PCM v1.0.0",url_aplicacion:"#"}),angular.module("PCMAdministradorApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).state("logout",{url:"/logout?referrer",referrer:"main",template:"",controller:["$state","Auth",function(a,b){var c=a.params.referrer||a.current.referrer||"main";b.logout(),a.go(c)}]}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl",authenticate:!0})}]).run(["$rootScope",function(a){a.$on("$stateChangeStart",function(a,b,c,d){"logout"===b.name&&d&&d.name&&!d.authenticate&&(b.referrer=d.name)})}]),angular.module("PCMAdministradorApp").controller("LoginCtrl",["$scope","Auth","$state","$window",function(a,b,c,d){a.user={},a.errors={},a.login=function(d){a.submitted=!0,d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){c.go("main")})["catch"](function(b){a.errors.other=b.message})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("PCMAdministradorApp").controller("SettingsCtrl",["$scope","User","Auth","apiServices","messageCenterService","config",function(a,b,c,d,e,f){a.errors={},a.model={editando:!1,parametros:{resumen:{cco:[],asunto:"",cuerpo:""},correo:{smtps:"",from:"",link_text:"",footer:""}}},a.cargar=function(){d.parametros.obtener(function(b){a.model.parametros=b},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error obtener parámetros de configuración.</span>",{html:!0,timeout:f.time_danger})})},a.cargar(),a.changePassword=function(b){a.submitted=!0,b.$valid&&c.changePassword(a.user.oldPassword,a.user.newPassword).then(function(){a.message="Contraseña modificada exitosamente."})["catch"](function(){b.password.$setValidity("mongoose",!1),a.errors.other="Contraseña incorrecta",a.message=""})},a.editar_parametros=function(){return a.model.editando=!0,a.model.parametros.correo.footer&&a.model.parametros.correo.footer.filesize/1024/1024>2?void e.add("warning","<strong>Ops!</strong><br /><span>El peso máximo de la imagen es 2MB, seleccione una imagen con menor peso.</span>",{html:!0,timeout:f.time_warning}):a.model.parametros.correo.footer&&"image/jpeg"!==a.model.parametros.correo.footer.filetype?void e.add("warning","<strong>Ops!</strong><br /><span>Solo se permiten imágenes de tipo JPG.</span>",{html:!0,timeout:f.time_warning}):(a.model.parametros.correo.footer&&(a.model.parametros.correo.footer=a.model.parametros.correo.footer.base64),void d.parametros.editar(a.model.parametros,function(b){a.model.parametros=b,a.model.editando=!1,e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(b){console.error(b),a.model.editando=!1,e.add("danger","<strong>Ops!</strong><br /><span>Error editar parámetros de configuración.</span>",{html:!0,timeout:f.time_danger})}))}}]),angular.module("PCMAdministradorApp").controller("ActividadesCtrl",["$scope","$stateParams","apiServices","_","messageCenterService","config",function(a,b,c,d,e,f){a.model={proyecto:{},actividades:[],motivo_enum:[],nuevo:{proyecto:b.id_proyecto,equipo:"",motivo_visita:"",parametros:{},estado_inicial:{},trabajos_realizados:{},recomendaciones:{},solicitante:"",indicador:{es_verde:!0}},ver_agregar:!1,ver_envio:!1,ver_actividades_enviar:!1,envio:{correos:[],cco:[],asunto:"",cuerpo:"",actividades:[]},ver_resumenes:!1,envios:[]},a.cargar=function(){c.proyectos.get({id:b.id_proyecto}).$promise.then(function(b){return b?(a.model.proyecto=b,a.model.envio.correos=a.model.proyecto.cliente.correos||"",c.actividades.getMotivoEnum().$promise):void 0}).then(function(d){return d?(a.model.motivo_enum=d,c.actividades.byProyecto({id_proyecto:b.id_proyecto}).$promise):void 0}).then(function(b){return b?(a.model.actividades=b,c.parametros.obtener().$promise):void 0}).then(function(d){return d?(a.model.envio.cco=d.resumen.cco,a.model.envio.asunto=d.resumen.asunto,a.model.envio.cuerpo=d.resumen.cuerpo,c.resumenes.byProyecto({id:b.id_proyecto}).$promise):void 0}).then(function(b){return b?(a.model.envios=b,b):void 0})["catch"](function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al cargar datos iniciales.</span>",{html:!0,timeout:f.time_danger})})},a.cargar(),a.agregar_actividad=function(){if(!a.model.nuevo.equipo||a.model.nuevo.equipo&&!a.model.nuevo.equipo._id)return void e.add("warning","<strong>Ops!</strong><br /><span>Debe seleccionar un equipo asociado.</span>",{html:!0,timeout:f.time_warning});if(!a.model.nuevo.motivo_visita)return void e.add("warning","<strong>Ops!</strong><br /><span>Debe seleccionar un motivo para la visita.</span>",{html:!0,timeout:f.time_warning});if(!a.model.nuevo.estado_inicial||a.model.nuevo.estado_inicial&&!a.model.nuevo.estado_inicial.texto)return void e.add("warning","<strong>Ops!</strong><br /><span>Debe agregar texto para etapa 1.</span>",{html:!0,timeout:f.time_warning});if(!a.model.nuevo.trabajos_realizados||a.model.nuevo.trabajos_realizados&&!a.model.nuevo.trabajos_realizados.texto)return void e.add("warning","<strong>Ops!</strong><br /><span>Debe agregar texto para etapa 2.</span>",{html:!0,timeout:f.time_warning});if(!a.model.nuevo.recomendaciones||a.model.nuevo.recomendaciones&&!a.model.nuevo.recomendaciones.texto)return void e.add("warning","<strong>Ops!</strong><br /><span>Debe agregar texto para etapa 3.</span>",{html:!0,timeout:f.time_warning});a.model.nuevo.equipo.tipo&&a.model.nuevo.equipo.tipo.trabajos&&a.model.nuevo.equipo.tipo.trabajos.length>0&&(a.model.nuevo.trabajos_realizados.trabajos=d.map(d.filter(a.model.nuevo.equipo.tipo.trabajos,function(a){return a.checked}),function(a){return a._id}));var b=d.clone(a.model.nuevo);b.es_pendiente=!1,c.actividades.save(b,function(b){a.model.ver_agregar=!1,a.cancelar_agregar(),a.model.actividades.unshift(b),e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al guardar trabajo.</span>",{html:!0,timeout:f.time_danger})})},a.cancelar_agregar=function(){a.model.ver_agregar=!1,a.model.nuevo={proyecto:b.id_proyecto,texto_equipo_buscar:"",equipos_buscar:[],equipo_seleccionado:{},equipo:"",motivo_visita:"",parametros:{},estado_inicial:{},trabajos_realizados:{},recomendaciones:{},solicitante:"",indicador:{es_verde:!0}}},a.desactivar=function(a){c.actividades.update({id:a._id},{es_activo:!a.es_activo},function(b){a.es_activo=b.es_activo,a.fecha_modificacion=b.fecha_modificacion,e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error editar datos de actividad.</span>",{html:!0,timeout:f.time_danger})})},a.revisar=function(a){c.actividades.update({id:a._id},{es_pendiente:!a.es_pendiente},function(b){a.es_pendiente=b.es_pendiente,a.fecha_modificacion=b.fecha_modificacion,e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error editar datos de actividad.</span>",{html:!0,timeout:f.time_danger})})},a.ver_form_editar=function(b){a.cancelar_editar(),b.ver_editar=!0,b.editar=d.clone(b),b.editar.equipo.tipo&&b.editar.equipo.tipo.trabajos&&b.editar.equipo.tipo.trabajos.length>0&&d.each(b.editar.equipo.tipo.trabajos,function(a){a.checked=d.some(b.trabajos_realizados.trabajos,function(b){return b._id===a._id})})},a.cancelar_editar=function(){d.each(a.model.actividades,function(a){a.ver_editar=!1,delete a.editar})},a.editar_actividad=function(b){if(!b.editar.equipo||b.editar.equipo&&!b.editar.equipo._id)return void e.add("warning","<strong>Ops!</strong><br /><span>Debe seleccionar un equipo asociado.</span>",{html:!0,timeout:f.time_warning});if(!b.editar.motivo_visita)return void e.add("warning","<strong>Ops!</strong><br /><span>Debe seleccionar un motivo para la visita.</span>",{html:!0,timeout:f.time_warning});if(!b.editar.estado_inicial||b.editar.estado_inicial&&!b.editar.estado_inicial.texto)return void e.add("warning","<strong>Ops!</strong><br /><span>Debe agregar texto para etapa 1.</span>",{html:!0,timeout:f.time_warning});if(!b.editar.trabajos_realizados||b.editar.trabajos_realizados&&!b.editar.trabajos_realizados.texto)return void e.add("warning","<strong>Ops!</strong><br /><span>Debe agregar texto para etapa 2.</span>",{html:!0,timeout:f.time_warning});if(!b.editar.recomendaciones||b.editar.recomendaciones&&!b.editar.recomendaciones.texto)return void e.add("warning","<strong>Ops!</strong><br /><span>Debe agregar texto para etapa 3.</span>",{html:!0,timeout:f.time_warning});b.editar.equipo.tipo&&b.editar.equipo.tipo.trabajos&&b.editar.equipo.tipo.trabajos.length>0&&(b.editar.trabajos_realizados.trabajos=d.map(d.filter(b.editar.equipo.tipo.trabajos,function(a){return a.checked}),function(a){return a._id}));var g=d.clone(b.editar);g.es_pendiente=!1,c.actividades.update({id:g._id},g,function(c){a.cancelar_editar(),b.motivo_visita=c.motivo_visita,b.parametros=c.parametros,b.estado_inicial=c.estado_inicial,b.trabajos_realizados=c.trabajos_realizados,b.recomendaciones=c.recomendaciones,b.observacion=c.observacion,b.equipo=c.equipo,b.ubicacion=c.ubicacion,b.solicitante=c.solicitante,b.es_verde=c.es_verde,b.es_amarillo=c.es_amarillo,b.es_rojo=c.es_rojo,b.fecha_modificacion=c.fecha_modificacion,e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al editar trabajo.</span>",{html:!0,timeout:f.time_danger})})},a.cancelar_resumen=function(){a.model.ver_envio=!1,a.model.envio={correos:a.model.proyecto.cliente.correos,cco:[],asunto:"",cuerpo:"",actividades:[]},d.each(a.model.actividades,function(a){a.check_enviar=!1})},a.agregar_resumen=function(){return a.model.envio.actividades=d.map(d.filter(a.model.actividades,function(a){return a.es_activo&&a.check_enviar}),function(a){return a._id}),a.model.envio.proyecto=b.id_proyecto,a.model.envio.correos?a.model.envio.asunto?a.model.envio.cuerpo?a.model.envio.observacion?!a.model.envio.actividades||a.model.envio.actividades&&0===a.model.envio.actividades.length?void e.add("warning","<strong>Ops!</strong><br /><span>Debe seleccionar por lo menos un trabajo para informar en este resumen.</span>",{html:!0,timeout:f.time_warning}):void c.resumenes.save(a.model.envio,function(b){a.cancelar_resumen(),e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success}),a.model.envios||(a.model.envios=[]),a.model.envios.unshift(b)},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error guardar datos de resumen.</span>",{html:!0,timeout:f.time_danger})}):void e.add("warning","<strong>Ops!</strong><br /><span>La observación general es obligatoria para enviar el resumen.</span>",{html:!0,timeout:f.time_warning}):void e.add("warning","<strong>Ops!</strong><br /><span>El texto cuerpo del correo es obligatorio para enviar el resumen.</span>",{html:!0,timeout:f.time_warning}):void e.add("warning","<strong>Ops!</strong><br /><span>El texto asunto del correo es obligatorio para enviar el resumen.</span>",{html:!0,timeout:f.time_warning}):void e.add("warning","<strong>Ops!</strong><br /><span>Debe indicar por lo menos un correo para enviar el resumen.</span>",{html:!0,timeout:f.time_warning})}}]),angular.module("PCMAdministradorApp").config(["$stateProvider",function(a){a.state("actividades",{url:"/actividades/:id_proyecto",templateUrl:"app/actividades/actividades.html",controller:"ActividadesCtrl",authenticate:!0})}]),angular.module("PCMAdministradorApp").controller("AdminCtrl",["$scope","$http","User","_","messageCenterService","config",function(a,b,c,d,e,f){a.model={users:[],ver_agregar:!1,roles:[],nuevo:{}},a.cargar=function(){c.query(function(b){a.model.users=b},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al cargar usuarios.</span>",{html:!0,timeout:f.time_danger})}),c.roles(function(b){b&&b.length>0?a.model.roles=b:e.add("danger","<strong>Ops!</strong><br /><span>Sin roles para mostrar.</span>",{html:!0,timeout:f.time_danger})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al cargar roles.</span>",{html:!0,timeout:f.time_danger})})},a.cargar(),a.agregar=function(){a.model.nuevo&&a.model.nuevo.role?c.save(a.model.nuevo,function(b){a.model.users.unshift(b),a.model.nuevo={},a.model.ver_agregar=!1,e.add("success","<strong>Ok!</strong><br /><span>Usuario creado exitosamente.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al crear usuario.</span>",{html:!0,timeout:f.time_danger})}):e.add("warning","<strong>Ops!</strong><br /><span>Debe seleccionar un rol para continuar.</span>",{html:!0,timeout:f.time_warning})},a.desactivar=function(a){c.update({id:a._id},{es_activo:!1},function(){a.es_activo=!1,e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al desactivar usuario.</span>",{html:!0,timeout:f.time_danger})})},a.activar=function(a){c.update({id:a._id},{es_activo:!0},function(){a.es_activo=!0,e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al activar usuario.</span>",{html:!0,timeout:f.time_danger})})},a.ver_form_editar=function(b){d.each(a.model.users,function(a){a.ver_editar=!1}),b.user_editar=d.clone(b),b.user_editar.password&&delete b.user_editar.password,b.ver_editar=!0},a.ocultar_form_editar=function(b){d.each(a.model.users,function(a){a.ver_editar=!1}),b.user_editar=d.clone(b),b.user_editar.password&&delete b.user_editar.password},a.editar=function(b){c.update({id:b._id},{name:b.user_editar.name,email:b.user_editar.email,password:b.user_editar.password,role:b.user_editar.role,correo:b.user_editar.correo},function(c){d.each(a.model.users,function(a){a.ver_editar=!1}),b.name=c.name,b.email=c.email,b.role=c.role,b.user_editar=d.clone(b),b.user_editar.password&&delete b.user_editar.password,e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al editar usuario.</span>",{html:!0,timeout:f.time_danger})})}}]),angular.module("PCMAdministradorApp").config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl",authenticate:!0})}]),angular.module("PCMAdministradorApp").service("apiServices",["$resource",function(a){return{proyectos:a("/api/proyecto/:id",{},{getAll:{method:"post",url:"/api/proyecto/getAll",isArray:!0},update:{method:"put"}}),actividades:a("/api/actividad/:id",{},{byProyecto:{method:"get",url:"/api/actividad/proyecto/:id_proyecto",isArray:!0},getMotivoEnum:{method:"post",url:"/api/actividad/motivo_enum",isArray:!0},update:{method:"put"}}),clientes:a("/api/cliente/:id",{},{activos:{method:"post",url:"/api/cliente/activos",isArray:!0},update:{method:"put"}}),equipos:a("/api/equipo/:id",{},{activos:{method:"post",url:"/api/equipo/activos",isArray:!0},update:{method:"put"},buscarByProyecto:{method:"post",url:"/api/equipo/proyecto_buscar",isArray:!0}}),tiposEquipos:a("/api/tipoequipo/:id",{},{update:{method:"put"},getTipos:{method:"get",url:"/api/tipoequipo/getTipos",isArray:!0}}),resumenes:a("/api/resumen/:id",{},{byProyecto:{method:"get",url:"/api/resumen/proyecto/:id",isArray:!0},vistaCliente:{method:"get",url:"/api/resumen/vista_cliente/:id",isArray:!1}}),parametros:a("/api/parametro/:id",{},{editar:{method:"post",url:"/api/parametro/editar",isArray:!1},obtener:{method:"get",url:"/api/parametro/obtener",isArray:!1}})}}]),angular.module("PCMAdministradorApp").directive("calendario",function(){return{templateUrl:"app/calendario/calendario.html",restrict:"E",scope:{dateOptions:"=",opened:"=",dateModel:"="},link:function(a){a.open=function(b){console.log("abre datepicker ...."),b.preventDefault(),b.stopPropagation(),a.opened=!0},a.clear=function(){a.ngModel=null}}}}),angular.module("PCMAdministradorApp").controller("ClientesCtrl",["$scope","apiServices","messageCenterService","config",function(a,b,c,d){a.model={clientes:[],nuevo:{nombre:"",correos:[],logo:""},ver_agregar:!1,ver_activos:!0},a.cargar=function(){b.clientes.query(function(b){a.model.clientes=b},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al cargar clientes.</span>",{html:!0,timeout:d.time_danger})})},a.cargar(),a.agregar=function(){if(!a.model.nuevo.nombre)return void c.add("warning","<strong>Ops!</strong><br /><span>El nombre de cliente es requerido.</span>",{html:!0,timeout:d.time_warning});if(a.model.nuevo.logo&&a.model.nuevo.logo.filesize/1024/1024>2)return void c.add("warning","<strong>Ops!</strong><br /><span>El peso máximo de la imagen es 2MB, seleccione una imagen con menor peso.</span>",{html:!0,timeout:d.time_warning});if(a.model.nuevo.logo&&"image/jpeg"!==a.model.nuevo.logo.filetype)return void c.add("warning","<strong>Ops!</strong><br /><span>Solo se permiten imágenes de tipo JPG.</span>",{html:!0,timeout:d.time_warning});if(a.model.nuevo.correos&&a.model.nuevo.correos.length>0){var e=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/i,f=!0;if(_.each(a.model.nuevo.correos,function(a){f&&!e.test(a)&&(c.add("warning",'<strong>Ops!</strong><br /><span>Correo "'+a+'" no tiene formato válido.</span>',{html:!0,timeout:d.time_warning}),f=!1)}),!f)return}b.clientes.save({nombre:a.model.nuevo.nombre,correos:a.model.nuevo.correos,logo:a.model.nuevo.logo.base64,contacto:a.model.nuevo.contacto,telefono:a.model.nuevo.telefono,direccion:a.model.nuevo.direccion},function(b){a.model.clientes||(a.model.clientes=[]),a.model.clientes.unshift(b),a.model.nuevo={},c.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:d.time_success})},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al guardar cliente.</span>",{html:!0,timeout:d.time_danger})})},a.desactivar=function(a){b.clientes.update({id:a._id},{es_activo:!1},function(b){a.es_activo=b.es_activo,a.fecha_modificacion=b.fecha_modificacion,c.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:d.time_success})},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al desactivar cliente.</span>",{html:!0,timeout:d.time_danger})})},a.activar=function(a){b.clientes.update({id:a._id},{es_activo:!0},function(b){a.es_activo=b.es_activo,a.fecha_modificacion=b.fecha_modificacion,c.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:d.time_success})},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al activar cliente.</span>",{html:!0,timeout:d.time_danger})})},a.ver_form_editar=function(b){a.model.ver_agregar=!1,a.model.nuevo={},_.each(a.model.cliente,function(a){a.ver_editar=!1}),b.ver_editar=!0,b.editar={nombre:b.nombre,correos:_.clone(b.correos),contacto:b.contacto,telefono:b.telefono,direccion:b.direccion}},a.ocultar_form_editar=function(b){a.model.ver_agregar=!1,a.model.nuevo={},_.each(a.model.clientes,function(a){a.ver_editar=!1}),b.ver_editar=!1,b.editar={}},a.editar=function(e){return e.editar.logo&&e.editar.logo.filesize/1024/1024>2?void c.add("warning","<strong>Ops!</strong><br /><span>El peso máximo de la imagen es 2MB, seleccione una imagen con menor peso.</span>",{html:!0,timeout:d.time_warning}):e.editar.logo&&"image/jpeg"!==e.editar.logo.filetype?void c.add("warning","<strong>Ops!</strong><br /><span>Solo se permiten imágenes de tipo JPG.</span>",{html:!0,timeout:d.time_warning}):void b.clientes.update({id:e._id},{nombre:e.editar.nombre,correos:e.editar.correos,logo:e.editar.logo?e.editar.logo.base64:void 0,contacto:e.editar.contacto,telefono:e.editar.telefono,direccion:e.editar.direccion},function(b){e.nombre=b.nombre,e.correos=b.correos,e.contacto=b.contacto,e.telefono=b.telefono,e.direccion=b.direccion,e.fecha_modificacion=b.fecha_modificacion,a.ocultar_form_editar(e),c.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:d.time_success})},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al editar cliente.</span>",{html:!0,timeout:d.time_danger})})}}]),angular.module("PCMAdministradorApp").config(["$stateProvider",function(a){a.state("clientes",{url:"/clientes",templateUrl:"app/clientes/clientes.html",controller:"ClientesCtrl"})}]),angular.module("PCMAdministradorApp").controller("EquiposCtrl",["$scope","apiServices","messageCenterService","config",function(a,b,c,d){a.model={equipos:[],tipos:[],nuevo:{nombre:"",serie:""},ver_agregar:!1,ver_activos:!0},a.cargar=function(){b.equipos.query(function(b){a.model.equipos=b},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al cargar equipos.</span>",{html:!0,timeout:d.time_danger})}),b.tiposEquipos.getTipos(function(b){a.model.tipos=b},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al cargar tipos de equipos.</span>",{html:!0,timeout:d.time_danger})})},a.cargar(),a.agregar=function(){return a.model.nuevo.nombre?void b.equipos.save(a.model.nuevo,function(b){a.model.equipos||(a.model.equipos=[]),a.model.equipos.unshift(b),a.model.nuevo={},a.model.ver_agregar=!1,c.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:d.time_success})},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al guardar equipo.</span>",{html:!0,timeout:d.time_danger})}):void c.add("warning","<strong>Ops!</strong><br /><span>El nombre de equipo es requerido.</span>",{html:!0,timeout:d.time_warning})},a.desactivar=function(a){console.log("desactivar"),b.equipos.update({id:a._id},{es_activo:!1},function(b){a.es_activo=b.es_activo,a.fecha_modificacion=b.fecha_modificacion,c.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:d.time_success})},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al desactivar equipo.</span>",{html:!0,timeout:d.time_danger})})},a.activar=function(a){console.log("activar"),b.equipos.update({id:a._id},{es_activo:!0},function(b){a.es_activo=b.es_activo,a.fecha_modificacion=b.fecha_modificacion,c.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:d.time_success})},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al activar equipo.</span>",{html:!0,timeout:d.time_danger})})},a.ver_form_editar=function(b){a.model.ver_agregar=!1,a.model.nuevo={},_.each(a.model.equipo,function(a){a.ver_editar=!1}),b.ver_editar=!0,b.editar=_.clone(b)},a.ocultar_form_editar=function(b){a.model.ver_agregar=!1,a.model.nuevo={},_.each(a.model.equipos,function(a){a.ver_editar=!1}),b.ver_editar=!1,b.editar={}},a.editar=function(e){b.equipos.update({id:e._id},e.editar,function(b){e.nombre=b.nombre,e.serie=b.serie,e.marca=b.marca,e.capacidad=b.capacidad,e.modelo=b.modelo,e.tipo=b.tipo,e.antiguedad=b.antiguedad,e.fecha_modificacion=b.fecha_modificacion,a.ocultar_form_editar(e),c.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:d.time_success})},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al editar equipo.</span>",{html:!0,timeout:d.time_danger})})},a.imprimir_single=function(a){var b=angular.element("#qr_"+a._id+" > img").attr("src"),c="data:image/jpeg;base64,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",d=new window.jsPDF;
d.setFontSize(40),d.addImage(c,"JPEG",15,15,180,50),d.addImage(b,"JPEG",15,75,180,180),d.text(15,285,"Serie: "+a.serie),d.save("qr_"+a._id+".pdf")}}]),angular.module("PCMAdministradorApp").config(["$stateProvider",function(a){a.state("equipos",{url:"/equipos",templateUrl:"app/equipos/equipos.html",controller:"EquiposCtrl"})}]),angular.module("PCMAdministradorApp").controller("MainCtrl",function(){}),angular.module("PCMAdministradorApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl",authenticate:!0})}]),angular.module("PCMAdministradorApp").controller("ProyectosCtrl",["$scope","apiServices","User","_","messageCenterService","config",function(a,b,c,d,e,f){a.model={proyectos:[],usuarios:[],clientes:[],equipos:[],nuevo:{nombre:"",cliente:"",equipos:[],usuarios:[],ubicaciones:[],ubicacion_temp:"",numero:"",fecha_inicio:Date.now(),fecha_fin:Date.now()},ver_inactivos:!1,ver_activos:!0,ver_agregar:!1,fecha_opciones:{}},a.cargar=function(){b.proyectos.getAll(function(b){a.model.proyectos=b},function(b){console.error(b),e.add("danger","<strong>Ops!</strong><br /><span>Error al cargar contratos.</span>",{html:!0,timeout:f.time_danger}),a.model.proyectos=[]}),c.perfiles_activos(function(b){a.model.usuarios=b},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al cargar usuarios.</span>",{html:!0,timeout:f.time_danger})}),b.clientes.activos(function(b){a.model.clientes=b},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al cargar clientes.</span>",{html:!0,timeout:f.time_danger})}),b.equipos.activos(function(b){a.model.equipos=b},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al cargar equipos.</span>",{html:!0,timeout:f.time_danger})})},a.cargar(),a.agregar_ubicacion_nuevo=function(){a.model.nuevo.ubicacion_temp&&(a.model.nuevo.ubicaciones||(a.model.nuevo.ubicaciones=[]),a.model.nuevo.ubicaciones.unshift(a.model.nuevo.ubicacion_temp),a.model.nuevo.ubicacion_temp="")},a.agregar=function(){a.model.nuevo.usuarios=d.map(d.filter(a.model.usuarios,function(a){return a.checked&&a.checked===!0}),function(a){return a._id}),a.model.nuevo.equipos=d.map(d.filter(a.model.equipos,function(a){return a.checked&&a.checked===!0}),function(a){return a._id}),b.proyectos.save(a.model.nuevo,function(b){d.each(a.model.usuarios,function(a){a.checked=!1}),a.model.nuevo={},a.model.ver_agregar=!1,a.model.proyectos.unshift(b),e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al crear contrato.</span>",{html:!0,timeout:f.time_danger})})},a.desactivar=function(a){b.proyectos.update({id:a._id},{es_activo:!1},function(b){a.es_activo=b.es_activo,a.fecha_modificacion=b.fecha_modificacion,e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al desactivar contrato.</span>",{html:!0,timeout:f.time_danger})})},a.activar=function(a){b.proyectos.update({id:a._id},{es_activo:!0},function(b){a.es_activo=b.es_activo,a.fecha_modificacion=b.fecha_modificacion,e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al activar contrato.</span>",{html:!0,timeout:f.time_danger})})},a.ver_form_editar=function(b){a.model.ver_agregar=!1,a.model.nuevo={},d.each(a.model.usuarios,function(a){a.checked=!1}),d.each(a.model.proyectos,function(a){a.ver_editar=!1}),d.each(a.model.inactivos,function(a){a.ver_editar=!1}),b.ver_editar=!0,b.editar={nombre:b.nombre,cliente:b.cliente?b.cliente._id:"",tipo:b.tipo,especialidad:b.especialidad,periodo:b.periodo,frecuencia:b.frecuencia,numero:b.numero,usuarios:d.clone(a.model.usuarios),equipos:d.clone(a.model.equipos),ubicaciones:d.clone(b.ubicaciones),fecha_inicio:b.fecha_inicio,fecha_fin:b.fecha_fin},b.usuarios&&d.each(b.editar.usuarios,function(a){a.checked=d.contains(d.map(b.usuarios,function(a){return a._id}),a._id)}),b.equipos&&d.each(b.editar.equipos,function(a){a.checked=d.contains(d.map(b.equipos,function(a){return a._id}),a._id)})},a.ocultar_form_editar=function(b){a.model.ver_agregar=!1,a.model.nuevo={},d.each(a.model.usuarios,function(a){a.checked=!1}),d.each(a.model.equipos,function(a){a.checked=!1}),d.each(a.model.proyectos,function(a){a.ver_editar=!1}),d.each(a.model.inactivos,function(a){a.ver_editar=!1}),b.ver_editar=!1,b.editar={}},a.editar=function(c){b.proyectos.update({id:c._id},{nombre:c.editar.nombre,cliente:c.editar.cliente,tipo:c.editar.tipo,especialidad:c.editar.especialidad,periodo:c.editar.periodo,frecuencia:c.editar.frecuencia,ubicaciones:c.editar.ubicaciones,numero:c.editar.numero,fecha_inicio:c.editar.fecha_inicio,fecha_fin:c.editar.fecha_fin,usuarios:d.map(d.filter(c.editar.usuarios,function(a){return a.checked&&a.checked===!0}),function(a){return a._id}),equipos:d.map(d.filter(c.editar.equipos,function(a){return a.checked&&a.checked===!0}),function(a){return a._id})},function(b){c.nombre=b.nombre,c.usuarios=b.usuarios,c.cliente=b.cliente,c.equipos=b.equipos,c.ubicaciones=b.ubicaciones,c.numero=b.numero,c.fecha_inicio=b.fecha_inicio,c.fecha_fin=b.fecha_fin,c.fecha_modificacion=b.fecha_modificacion,a.ocultar_form_editar(c),e.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:f.time_success})},function(a){console.error(a),e.add("danger","<strong>Ops!</strong><br /><span>Error al editar contrato.</span>",{html:!0,timeout:f.time_danger})})},a.agregar_ubicacion_editar=function(a){a.editar.ubicacion_temp&&(a.editar.ubicaciones||(a.editar.ubicaciones=[]),a.editar.ubicaciones.unshift({nombre:a.editar.ubicacion_temp}),a.editar.ubicacion_temp="")},a.guardar_ubicacion_editada=function(a){a.nombre_temp&&(a.ver_editar=!1,a.nombre=a.nombre_temp,a.nombre_temp="")}}]),angular.module("PCMAdministradorApp").config(["$stateProvider",function(a){a.state("proyectos",{url:"/proyectos",templateUrl:"app/proyectos/proyectos.html",controller:"ProyectosCtrl",authenticate:!0})}]),angular.module("PCMAdministradorApp").controller("ResumenCtrl",["$scope","apiServices","$stateParams",function(a,b,c){a.model={resumen:{},cargando:!0,error:!1,ver_rojos:!1,ver_amarillos:!1,ver_verdes:!1},a.cargar=function(){b.resumenes.vistaCliente({id:c.id},function(b){a.model.resumen=b,a.model.cargando=!1},function(b){console.error(b),a.model.cargando=!1,a.model.error=!0})},a.cargar()}]),angular.module("PCMAdministradorApp").config(["$stateProvider",function(a){a.state("resumen",{url:"/resumen/:id",templateUrl:"app/resumen/resumen.html",controller:"ResumenCtrl"})}]),angular.module("PCMAdministradorApp").controller("TipoEquipoCtrl",["$scope","apiServices","messageCenterService","config",function(a,b,c,d){a.model={tipos:[],nuevo:{trabajo_temp:"",nombre:"",trabajos:[]},ver_agregar:!1},a.cargar=function(){b.tiposEquipos.query(function(b){a.model.tipos=b},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al cargar tipos de equipos.</span>",{html:!0,timeout:d.time_danger})})},a.cargar(),a.agregar_trabajo_nuevo=function(){a.model.nuevo.trabajo_temp&&(a.model.nuevo.trabajos||(a.model.nuevo.trabajos=[]),a.model.nuevo.trabajos.unshift(a.model.nuevo.trabajo_temp),a.model.nuevo.trabajo_temp="")},a.cancelar_agregar=function(){a.model.ver_agregar=!1,a.model.nuevo={trabajo_temp:"",nombre:"",trabajos:[]}},a.agregar=function(){b.tiposEquipos.save(a.model.nuevo,function(b){a.cancelar_agregar(),a.model.tipos.unshift(b),c.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:d.time_success}),console.dir(b)},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al crear tipo de equipo.</span>",{html:!0,timeout:d.time_danger})})},a.cancelar_editar=function(a){a.ver_editar=!1,a.editar={}},a.ver_form_editar=function(b){a.cancelar_agregar(),_.each(a.model.tipos,function(b){a.cancelar_editar(b)}),b.ver_editar=!0,b.editar=_.clone(b)},a.agregar_trabajo_editar=function(a){a.editar.trabajo_temp&&(a.editar.trabajos||(a.editar.trabajos=[]),a.editar.trabajos.unshift({nombre:a.editar.trabajo_temp}),a.editar.trabajo_temp="")},a.guardar_trabajo_editada=function(a){a.nombre_temp&&(a.ver_editar=!1,a.nombre=a.nombre_temp,a.nombre_temp="")},a.editar=function(e){b.tiposEquipos.update({id:e._id},e.editar,function(b){e.nombre=b.nombre,e.trabajos=b.trabajos,e.fecha_modificacion=b.fecha_modificacion,a.cancelar_editar(e),c.add("success","<strong>Ok!</strong><br /><span>Operación exitosa.</span>",{html:!0,timeout:d.time_success})},function(a){console.error(a),c.add("danger","<strong>Ops!</strong><br /><span>Error al editar tipo de equipo.</span>",{html:!0,timeout:d.time_danger})})}}]),angular.module("PCMAdministradorApp").config(["$stateProvider",function(a){a.state("tiposequipos",{url:"/tiposequipos",templateUrl:"app/tipoequipo/tipoequipo.html",controller:"TipoEquipoCtrl"})}]),angular.module("PCMAdministradorApp").factory("Auth",["$http","User","$cookies","$q","$state",function(a,b,c,d,e){var f=function(a){return angular.isFunction(a)?a:angular.noop},g={};return c.get("token")&&(g=b.get()),{login:function(e,h){return a.post("/auth/local",{email:e.email,password:e.password}).then(function(a){return c.put("token",a.data.token),g=b.get(),g.$promise}).then(function(a){return f(h)(null,a),a})["catch"](function(a){return this.logout(),f(h)(a.data),d.reject(a.data)}.bind(this))},logout:function(){e.go("main"),c.remove("token"),g={}},createUser:function(a,d){return b.save(a,function(e){return c.put("token",e.token),g=b.get(),f(d)(null,a)},function(a){return this.logout(),f(d)(a)}.bind(this)).$promise},changePassword:function(a,c,d){return b.changePassword({id:g._id},{oldPassword:a,newPassword:c},function(){return f(d)(null)},function(a){return f(d)(a)}).$promise},getCurrentUser:function(a){if(0===arguments.length)return g;var b=g.hasOwnProperty("$promise")?g.$promise:g;return d.when(b).then(function(b){return f(a)(b),b},function(){return f(a)({}),{}})},isLoggedIn:function(a){return 0===arguments.length?g.hasOwnProperty("role"):this.getCurrentUser(null).then(function(b){var c=b.hasOwnProperty("role");return f(a)(c),c})},isAdmin:function(a){return 0===arguments.length?"admin"===g.role:this.getCurrentUser(null).then(function(b){var c="admin"===b.role;return f(a)(c),c})},getToken:function(){return c.get("token")}}}]),angular.module("PCMAdministradorApp").factory("User",["$resource",function(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"put",params:{controller:"password"}},get:{method:"get",params:{id:"me"}},roles:{method:"post",url:"/api/users/roles",isArray:!0},update:{method:"put",params:{controller:"update"}},perfiles_activos:{method:"post",url:"/api/users/profiles_activos",isArray:!0}})}]),angular.module("PCMAdministradorApp").directive("footer",["config",function(a){return{templateUrl:"components/footer/footer.html",restrict:"E",link:function(b,c){c.addClass("footer"),b.config=a}}}]),angular.module("PCMAdministradorApp").directive("loading",function(){return{templateUrl:"components/loading/loading.html",restrict:"E"}}),angular.module("PCMAdministradorApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("PCMAdministradorApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}}),angular.module("PCMAdministradorApp").controller("NavbarCtrl",["$scope","Auth",function(a,b){a.isCollapsed=!0,a.isLoggedIn=b.isLoggedIn,a.isAdmin=b.isAdmin,a.getCurrentUser=b.getCurrentUser}]),angular.module("PCMAdministradorApp").directive("navbar",function(){return{templateUrl:"components/navbar/navbar.html",restrict:"E",controller:"NavbarCtrl"}}),angular.module("PCMAdministradorApp").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<navbar></navbar><div class=container><div class=row><div class=col-sm-12><h1>Bienvenido!</h1></div><div class=col-sm-12><form class=form name=form ng-submit=login(form) novalidate><div class=form-group><label>Nombre de usuario</label><input name=email class=form-control ng-model=user.email required></div><div class=form-group><label>Contraseña</label><input type=password name=password class=form-control ng-model=user.password required></div><div class="form-group has-error"><p class=help-block ng-show="form.email.$error.required && form.password.$error.required && submitted">Por favor ingrese su correo y contraseña.</p><p class=help-block>{{ errors.other }}</p></div><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Entrar</button></div></form></div></div><hr></div>'),a.put("app/account/settings/settings.html",'<navbar></navbar><div class=container><div class=row><div class=col-md-12><h1>Configuración</h1></div><div class=col-md-12><ul class=list-group><li class=list-group-item><a href=#>Cambiar contraseña</a></li><li class=list-group-item><form class=form name=form ng-submit=changePassword(form) novalidate><div class=form-group><label>Contraseña actual</label><input type=password name=password class=form-control ng-model=user.oldPassword mongoose-error><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.other }}</p></div><div class=form-group><label>Contraseña nueva</label><input type=password name=newPassword class=form-control ng-model=user.newPassword ng-minlength=3 required><p class=help-block ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)">Solo números y letras, debe tener entre 3 a 10 caracteres.</p></div><p class=help-block>{{ message }}</p><button class="btn btn-success" type=submit>Modificar contraseña</button></form></li></ul><ul class=list-group><li class=list-group-item><a href=#>Parámetros</a></li><li class=list-group-item><form class=form ng-submit=editar_parametros()><p class=help-block>Datos por defecto para envío correo resumen a clientes.</p><div class=form-group><label>Correos ocultos</label><input class=form-control placeholder="Correos ocultos resumen cliente" ng-model=model.parametros.resumen.cco ng-list=, ng-trim=true><p class=help-block>Para agregar multiples correos ocupe \',\' (coma) como separador.</p></div><div class=form-group><label>Asunto correo</label><input class=form-control placeholder="Asunto correo resumen cliente" ng-model=model.parametros.resumen.asunto></div><div class=form-group><label>Cuerpo correo</label><textarea rows=5 class=form-control placeholder="Escriba cuerpo correo resumen cliente" ng-model=model.parametros.resumen.cuerpo></textarea></div><hr><div class=form-group><label>String SMTPs</label><input class=form-control placeholder="Configuración SMTPs" ng-model=model.parametros.correo.smtps></div><div class=form-group><label>Texto From</label><input class=form-control placeholder="Texto From" ng-model=model.parametros.correo.from></div><div class=form-group><label>Texto link hacia resumen</label><input class=form-control placeholder="Texto link hacia resumen" ng-model=model.parametros.correo.link_text></div><div class=form-group><label>Imagen pié de correo</label><input type=file class=form-control placeholder="Imagen pié de correo" ng-model=model.parametros.correo.footer base-sixty-four-input><p class=help-block>Debe seleccionar una imagen de tamaño menor a 2MB y tipo JPG.</p><img class="img-responsive img-set-footer-correo" on-error-src=/assets/images/no-image.a1224aaa.png ng-src=/api/parametro/footer_correo ng-if=!model.editando></div><button class="btn btn-success" type=submit>Modificar parámetros</button></form></li></ul></div></div></div>'),a.put("app/actividades/actividades.html",'<navbar></navbar><div class=container><div class=row><div class=col-md-12><img class="pull-left imagen-cliente-actividades" delete-on-error-src ng-src=/api/cliente/logo/{{model.proyecto.cliente._id}}><h2 class=azul-destacado><span class="label label-danger" ng-show=!model.proyecto.es_activo>Contrato inactivo</span> {{model.proyecto.cliente && model.proyecto.cliente.nombre? model.proyecto.cliente.nombre : \'Sin cliente asociado.\'}} - {{model.proyecto.nombre}}</h2></div></div><div class=row><div class=col-md-12><ul class=list-group><li class=list-group-item><a href=# ui-sref=proyectos>Volver a lista de contratos</a> <a href=# ng-click="model.ver_agregar = !model.ver_agregar; model.ver_envio = false; model.ver_resumenes = false;">| Nuevo trabajo</a> <a href=# ng-click="model.ver_envio = !model.ver_envio; model.ver_agregar = false; model.ver_resumenes = false;">| Nuevo resumen cliente</a> <a href=# ng-click="model.ver_resumenes = !model.ver_resumenes; model.ver_agregar = false; model.ver_envio = false;">| Historial de envíos</a></li><!-- form para agregar actividades --><form ng-submit=agregar_actividad()><li class=list-group-item ng-show=model.ver_agregar><div class=form-group><label>Equipo asociado <small>Requerido</small></label><select class=form-control ng-options="item as (item.nombre + \' , Serie: \' + item.serie) for item in model.proyecto.equipos track by item._id" ng-model=model.nuevo.equipo></select></div><div class=form-group><label>Ubicación <small>Requerido</small></label><select required ng-model=model.nuevo.ubicacion class=form-control><option value="">Seleccione un elemento de la lista ...</option><option ng-repeat="item in model.proyecto.ubicaciones" value={{item._id}}>{{item.nombre}}</option></select></div><div class=form-group><label>Motivo del trabajo <small>Requerido</small></label><select required class=form-control ng-options="item as item for item in model.motivo_enum" ng-model=model.nuevo.motivo_visita><option value="">Seleccione un elemento de la lista ...</option></select></div><div class=form-group><label>Solicitante <small>Opcional</small></label><input class=form-control placeholder="Nombre solicitante del trabajo" ng-model=model.nuevo.solicitante></div><div class=form-group><label>Indicador trabajo</label><div class=form-group><div class=btn-group data-toggle=buttons><label class="btn btn-success"><input type=radio name=indicador-{{actividad._id}} ng-click="model.nuevo.indicador.es_verde = true; model.nuevo.indicador.es_amarillo = false; model.nuevo.indicador.es_rojo = false;"> <span class="glyphicon glyphicon-ok" ng-show=model.nuevo.indicador.es_verde></span>&nbsp;</label><label class="btn btn-warning"><input type=radio name=indicador-{{actividad._id}} ng-click="model.nuevo.indicador.es_verde = false; model.nuevo.indicador.es_amarillo = true; model.nuevo.indicador.es_rojo = false;"> <span class="glyphicon glyphicon-ok" ng-show=model.nuevo.indicador.es_amarillo></span>&nbsp;</label><label class="btn btn-danger"><input type=radio name=indicador-{{actividad._id}} ng-click="model.nuevo.indicador.es_verde = false; model.nuevo.indicador.es_amarillo = false; model.nuevo.indicador.es_rojo = true;"> <span class="glyphicon glyphicon-ok" ng-show=model.nuevo.indicador.es_rojo></span>&nbsp;</label></div></div><p class=help-block>Este indicador será mostrado en las plantillas resumen del cliente.</p></div></li><li class=list-group-item ng-show=model.ver_agregar><div class=form-group><label>Parámetros funcionamiento</label></div><div class=row><div class=col-md-2><div class=form-group><label>C. Compresor N°1</label></div></div><div class=col-md-10><div class=row><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>R</div><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.compresor_n1_r></div></div><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>S</div><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.compresor_n1_s></div></div><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>T</div><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.compresor_n1_t></div></div></div></div></div><div class=row><div class=col-md-2><div class=form-group><label>C. Compresor N°2</label></div></div><div class=col-md-10><div class=row><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>R</div><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.compresor_n2_r></div></div><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>S</div><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.compresor_n2_s></div></div><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>T</div><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.compresor_n2_t></div></div></div></div></div><div class=row><div class=col-md-4><div class=form-group><label>P. Succión</label><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.p_succion></div></div><div class=col-md-4><div class=form-group><label>P. Descarga</label><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.p_descarga></div></div><div class=col-md-4><div class=form-group><label>T. Inyección</label><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.t_inyeccion></div></div><div class=col-md-4><div class=form-group><label>T. Retorno</label><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.t_retorno></div></div><div class=col-md-4><div class=form-group><label>T. Ambiente</label><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.t_ambiente></div></div><div class=col-md-4><div class=form-group><label>T. Exterior</label><input type=number class=form-control placeholder="" ng-model=model.nuevo.parametros.t_exterior></div></div></div></li><li class=list-group-item ng-show=model.ver_agregar><div class=row><div class=col-md-4><div class=form-group><label>Estado inicial equipo <small>Requerido</small></label><textarea rows=5 required class=form-control placeholder="Escriba un texto descriptivo para este campo" ng-model=model.nuevo.estado_inicial.texto></textarea></div></div><div class=col-md-4><div class=form-group><label>Trabajos realizados <small>Requerido</small></label><textarea rows=5 required class=form-control placeholder="Escriba un texto descriptivo para este campo" ng-model=model.nuevo.trabajos_realizados.texto></textarea></div></div><div class=col-md-4><div class=form-group><label>Recomendaciones <small>Requerido</small></label><textarea rows=5 required class=form-control placeholder="Escriba un texto descriptivo para este campo" ng-model=model.nuevo.recomendaciones.texto></textarea></div></div></div></li><a href=# class=list-group-item ng-init="model.ver_lista_trabajos = false" ng-click="model.ver_lista_trabajos = !model.ver_lista_trabajos" ng-show=model.ver_agregar><span class="azul-destacado ng-binding">Lista de trabajos asociados {{model.nuevo.equipo && model.nuevo.equipo.tipo && model.nuevo.equipo.tipo.trabajos && model.nuevo.equipo.tipo.trabajos.length > 0 ? \'(\' + model.nuevo.equipo.tipo.trabajos.length + \')\' : \'\'}}</span></a><li class=list-group-item ng-show="model.ver_agregar && model.ver_lista_trabajos && model.nuevo.equipo && model.nuevo.equipo.tipo && model.nuevo.equipo.tipo.trabajos && model.nuevo.equipo.tipo.trabajos.length > 0"><div class=form-group><label>Trabajo para equipo tipo: {{model.nuevo.equipo.tipo.nombre}} ({{model.nuevo.equipo.tipo.trabajos.length}})</label><ul class="list-group list-group-hover scroll-lista-trab-realizados"><label ng-repeat="trabajo in model.nuevo.equipo.tipo.trabajos | orderBy: \'nombre\'" class="list-group-item {{trabajo.checked ? \'list-group-item-info\' : \'\'}}"><input type=checkbox ng-model=trabajo.checked> {{$index + 1}} - {{trabajo.nombre}}</label></ul></div></li><li class=list-group-item ng-show=model.ver_agregar><div class=form-group><label>Observación gerencia</label><textarea rows=3 class=form-control placeholder="Escriba un texto descriptivo para este campo" ng-model=model.nuevo.observacion.texto></textarea></div></li><li class=list-group-item ng-show=model.ver_agregar><button type=submit class="btn btn-success">Agregar</button> <button type=button class="btn btn-danger" ng-click=cancelar_agregar()>Cancelar</button></li></form><li class=list-group-item ng-show=model.ver_envio><p class=help-block>Para crear la hoja resumen de trabajos realizados debe ingresar por lo menos un correo cliente y un trabajo a informar.</p><div class=form-group><label>Correos cliente <small>Requerido</small></label><input class=form-control placeholder="Correos del cliente" ng-model=model.envio.correos ng-list=, ng-trim=true><p class=help-block>Para agregar multiples correos ocupe \',\' (coma) como separador.</p></div><div class=form-group><label>Correos copia oculta</label><input class=form-control placeholder="Correos copia oculta" ng-model=model.envio.cco ng-list=, ng-trim=true><p class=help-block>Para agregar multiples correos ocupe \',\' (coma) como separador.</p></div><div class=form-group><label>Texto asunto del correo</label><input class=form-control placeholder="Texto asunto del correo" ng-model=model.envio.asunto></div><div class=form-group><label>Texto cuerpo del correo</label><textarea rows=4 class=form-control placeholder="Texto cuerpo del correo" ng-model=model.envio.cuerpo></textarea></div><div class=form-group><label>Observación general <small>Requerida (solo visible en link cliente)</small></label><textarea rows=4 class=form-control placeholder="Observación general" ng-model=model.envio.observacion></textarea></div><div class=form-group><ul class=list-group><li class=list-group-item><a href=# ng-click="model.ver_actividades_enviar = !model.ver_actividades_enviar">{{model.ver_actividades_enviar ? \'Ocultar trabajos que se informarán en este resumen\' : \'Ver trabajos que se informarán en este resumen\'}} ({{model.actividades_tmp ? model.actividades_tmp.length : \'0\'}})</a></li><li class=list-group-item ng-show=model.ver_actividades_enviar ng-repeat="actividad in model.actividades_tmp = (model.actividades | filter: { check_enviar: true })"><div class=row><div class=col-md-12><a href=# ng-click="actividad.check_enviar = false"><span class="glyphicon glyphicon-remove pull-right"></span></a><p><span class="label label-success" ng-show=actividad.indicador.es_verde>&nbsp;&nbsp;</span> <span class="label label-warning" ng-show=actividad.indicador.es_amarillo>&nbsp;&nbsp;</span> <span class="label label-danger" ng-show=actividad.indicador.es_rojo>&nbsp;&nbsp;</span> <span><strong>Fecha ingreso:</strong> {{actividad.fecha_ingreso | date:\'dd/MM/yyyy HH:mm\'}}</span></p></div><div class=col-md-6><p><strong>Equipo:</strong> {{actividad.equipo.nombre}}</p><p><strong>Marca:</strong> {{actividad.equipo.marca}}</p><p><strong>Modelo:</strong> {{actividad.equipo.modelo}}</p><p><strong>Tipo:</strong> {{actividad.equipo.tipo ? actividad.equipo.tipo.nombre : \'Sin asignar\'}} | <strong>Capacidad:</strong> {{actividad.equipo.capacidad}} | <strong>Serie:</strong> {{actividad.equipo.serie}} | <strong>Antiguedad:</strong> {{actividad.equipo.antiguedad}}</p></div><div class=col-md-6><p><strong>Operador:</strong> {{actividad.creador.name}}</p><p><strong>Motivo visita:</strong> {{actividad.motivo_visita}}</p><p><strong>Ubicación:</strong> {{actividad.ubicacion.nombre}}</p><p ng-show=actividad.solicitante><strong>Solicitante:</strong> {{actividad.solicitante}}</p></div></div></li><li class=list-group-item ng-show="model.ver_actividades_enviar && (!model.actividades_tmp || (model.actividades_tmp && model.actividades_tmp.length === 0))">Sin datos para mostrar.</li></ul></div><button type=submit class="btn btn-success" ng-click=agregar_resumen()>Guardar y enviar resumen</button> <button type=button class="btn btn-danger" ng-click=cancelar_resumen()>Cancelar</button></li><li class=list-group-item ng-show=model.ver_resumenes><ul class=list-group><div ng-repeat="envio in model.envios | orderBy: \'-fecha_creacion\'"><li class=list-group-item><span ng-show=!envio.fecha_envio class="label label-danger">Resumen no enviado</span> <small ng-show=envio.fecha_envio><strong>Fecha envío:</strong> {{envio.fecha_envio | date:\'dd/MM/yyyy HH:mm\'}} |</small> <small ng-show=envio.fecha_ultimo_reenvio><strong>Fecha último reenvío:</strong> {{envio.fecha_ultimo_reenvio | date:\'dd/MM/yyyy HH:mm\'}} {{envio.cantidad_envios && envio.cantidad_envios > 0 ? (\'(\' + envio.cantidad_envios + \' reintentos) \') : \' \' }}|</small> <small ng-show=envio.fecha_creacion><strong>Fecha ingreso:</strong> {{envio.fecha_creacion | date:\'dd/MM/yyyy HH:mm\'}} |</small> <small ng-show=envio.fecha_modificacion><strong>Fecha modificación:</strong> {{envio.fecha_modificacion | date:\'dd/MM/yyyy HH:mm\'}} |</small> <small ng-show=envio.creador><strong>Creador:</strong> {{envio.creador ? envio.creador.name : \'Sin datos para mostrar\'}}</small> <a href=# class=pull-right ng-click="envio.ver_detalle = !envio.ver_detalle">{{envio.ver_detalle ? \'Ocultar detalles\' : \'Ver detalles\'}}</a></li><li class=list-group-item ng-show=envio.ver_detalle><strong>Asunto:</strong> {{envio.asunto ? envio.asunto : \'Sin datos para mostrar.\'}} | <strong>Correos:</strong> {{envio.correos ? envio.correos.join(\', \') : \'Sin datos para mostrar.\'}} | <strong>Copias ocultas:</strong> {{envio.cco ? envio.cco.join(\', \') : \'Sin datos para mostrar.\'}}<br><strong>Cuerpo:</strong> <span class=string-multiline>{{envio.cuerpo ? envio.cuerpo : \'Sin datos para mostrar.\'}}</span><br><strong>Observación general:</strong> <span class=string-multiline>{{envio.observacion ? envio.observacion : \'Sin datos para mostrar.\'}}</span><br><strong>Cantidad de trabajos informados:</strong> {{envio.actividades ? envio.actividades.length : \'Sin datos para mostrar.\'}}<br></li><li class=list-group-item ng-show=envio.ver_detalle><a href=# ui-sref="resumen({id: envio._id})">Link resumen cliente</a></li><br></div></ul></li></ul></div></div><div class=row><div class=col-md-12><ul class=list-group ng-repeat="actividad in model.actividades | orderBy: \'-fecha_ingreso\'| orderBy: \'-es_activo\'"><!-- informacion y opciones --><li class="list-group-item {{!actividad.es_activo ? \'list-group-item-danger\' : \'\'}}"><div class=row><div class="col-md-1 col-selector-actividad-1" ng-show="model.ver_envio && actividad.es_activo"><button type=button class="btn btn-default" ng-click="actividad.check_enviar = !actividad.check_enviar"><span class="icono-selector-actividad glyphicon glyphicon-{{actividad.check_enviar ? \'check\' : \'unchecked\'}}"></span></button></div><div class="col-md-1 col-indicador-actividad-1"><span class="label label-success" ng-show=actividad.indicador.es_verde>&nbsp;&nbsp;</span> <span class="label label-warning" ng-show=actividad.indicador.es_amarillo>&nbsp;&nbsp;</span> <span class="label label-danger" ng-show=actividad.indicador.es_rojo>&nbsp;&nbsp;</span></div><div class=col-md-10><span><strong>Fecha ingreso:</strong> {{actividad.fecha_ingreso | date:\'dd/MM/yyyy HH:mm\'}}</span> <span ng-show=actividad.es_pendiente>| <span class="label label-warning">Pendiente</span></span> <span ng-hide=actividad.es_activo>| <span class="label label-danger">Desactivada</span></span><br><small ng-hide=actividad.ver_editar><a href=# ng-show=actividad.es_pendiente ng-click=revisar(actividad)>Marcar como revisada</a> <a href=# ng-hide=actividad.es_pendiente ng-click=revisar(actividad)>Marcar pendiente</a> <a href=# ng-click=ver_form_editar(actividad)>| Editar</a> <a href=# ng-show=actividad.es_activo ng-click=desactivar(actividad)>| Desactivar</a> <a href=# ng-hide=actividad.es_activo ng-click=desactivar(actividad)>| Activar</a></small></div></div></li><!-- editar datos de actividad --><form ng-submit=editar_actividad(actividad) ng-show=actividad.ver_editar><li class="list-group-item {{!actividad.es_activo ? \'list-group-item-danger\' : \'\'}}"><div class=form-group><label>Equipo asociado <small>Requerido</small></label><select class=form-control ng-options="item as item.nombre for item in model.proyecto.equipos track by item._id" ng-model=actividad.editar.equipo></select></div><div class=form-group><label>Ubicación <small>Requerido</small></label><select class=form-control ng-options="item as item.nombre for item in model.proyecto.ubicaciones track by item._id" ng-model=actividad.editar.ubicacion></select></div><div class=form-group><label>Motivo del trabajo <small>Requerido</small></label><select required class=form-control ng-options="item as item for item in model.motivo_enum" ng-model=actividad.editar.motivo_visita><option value="">Seleccione un elemento de la lista ...</option></select></div><div class=form-group><label>Solicitante <small>Opcional</small></label><input class=form-control placeholder="Nombre solicitante del trabajo" ng-model=actividad.editar.solicitante></div><div class=form-group><label>Indicador trabajo</label><div class=form-group><div class=btn-group data-toggle=buttons><label class="btn btn-success"><input type=radio name=indicador-{{actividad._id}} ng-click="actividad.editar.indicador.es_verde = true; actividad.editar.indicador.es_amarillo = false; actividad.editar.indicador.es_rojo = false;"> <span class="glyphicon glyphicon-ok" ng-show=actividad.editar.indicador.es_verde></span>&nbsp;</label><label class="btn btn-warning"><input type=radio name=indicador-{{actividad._id}} ng-click="actividad.editar.indicador.es_verde = false; actividad.editar.indicador.es_amarillo = true; actividad.editar.indicador.es_rojo = false;"> <span class="glyphicon glyphicon-ok" ng-show=actividad.editar.indicador.es_amarillo></span>&nbsp;</label><label class="btn btn-danger"><input type=radio name=indicador-{{actividad._id}} ng-click="actividad.editar.indicador.es_verde = false; actividad.editar.indicador.es_amarillo = false; actividad.editar.indicador.es_rojo = true;"> <span class="glyphicon glyphicon-ok" ng-show=actividad.editar.indicador.es_rojo></span>&nbsp;</label></div></div><p class=help-block>Este indicador será mostrado en las plantillas resumen del cliente.</p></div></li><li class="list-group-item {{!actividad.es_activo ? \'list-group-item-danger\' : \'\'}}"><div class=form-group><label>Parámetros funcionamiento</label></div><div class=row><div class=col-md-2><div class=form-group><label>C. Compresor N°1</label></div></div><div class=col-md-10><div class=row><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>R</div><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.compresor_n1_r></div></div><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>S</div><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.compresor_n1_s></div></div><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>T</div><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.compresor_n1_t></div></div></div></div></div><div class=row><div class=col-md-2><div class=form-group><label>C. Compresor N°2</label></div></div><div class=col-md-10><div class=row><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>R</div><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.compresor_n2_r></div></div><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>S</div><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.compresor_n2_s></div></div><div class=col-md-4><div class="input-group form-group"><div class=input-group-addon>T</div><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.compresor_n2_t></div></div></div></div></div><div class=row><div class=col-md-4><div class=form-group><label>P. Succión</label><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.p_succion></div></div><div class=col-md-4><div class=form-group><label>P. Descarga</label><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.p_descarga></div></div><div class=col-md-4><div class=form-group><label>T. Inyección</label><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.t_inyeccion></div></div><div class=col-md-4><div class=form-group><label>T. Retorno</label><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.t_retorno></div></div><div class=col-md-4><div class=form-group><label>T. Ambiente</label><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.t_ambiente></div></div><div class=col-md-4><div class=form-group><label>T. Exterior</label><input type=number class=form-control placeholder="" ng-model=actividad.editar.parametros.t_exterior></div></div></div></li><li class="list-group-item {{!actividad.es_activo ? \'list-group-item-danger\' : \'\'}}"><div class=row><div class=col-md-4><div class=form-group><label>Estado inicial equipo <small>Requerido</small></label><textarea rows=5 required class=form-control placeholder="Escriba un texto descriptivo para este campo" ng-model=actividad.editar.estado_inicial.texto></textarea></div></div><div class=col-md-4><div class=form-group><label>Trabajos realizados <small>Requerido</small></label><textarea rows=5 required class=form-control placeholder="Escriba un texto descriptivo para este campo" ng-model=actividad.editar.trabajos_realizados.texto></textarea></div></div><div class=col-md-4><div class=form-group><label>Recomendaciones <small>Requerido</small></label><textarea rows=5 required class=form-control placeholder="Escriba un texto descriptivo para este campo" ng-model=actividad.editar.recomendaciones.texto></textarea></div></div></div></li><a href=# class=list-group-item ng-init="actividad.editar.ver_lista_trabajos = false" ng-click="actividad.editar.ver_lista_trabajos = !actividad.editar.ver_lista_trabajos"><span class="azul-destacado ng-binding">Lista de trabajos asociados</span></a><li class=list-group-item ng-show="actividad.editar.ver_lista_trabajos && actividad.editar.equipo && actividad.editar.equipo.tipo && actividad.editar.equipo.tipo.trabajos && actividad.editar.equipo.tipo.trabajos.length > 0"><div class=form-group><label>Trabajo para equipo tipo: {{actividad.editar.equipo.tipo.nombre}}</label><ul class="list-group list-group-hover scroll-lista-trab-realizados"><label ng-repeat="trabajo in actividad.editar.equipo.tipo.trabajos | orderBy: \'nombre\'" class="list-group-item {{trabajo.checked ? \'list-group-item-info\' : \'\'}}"><input type=checkbox ng-model=trabajo.checked> {{$index + 1}} - {{trabajo.nombre}}</label></ul></div></li><li class="list-group-item {{!actividad.es_activo ? \'list-group-item-danger\' : \'\'}}"><div class=form-group><label>Observación gerencia</label><textarea rows=3 class=form-control placeholder="Escriba un texto descriptivo para este campo" ng-model=actividad.editar.observacion.texto></textarea></div></li><li class="list-group-item {{!actividad.es_activo ? \'list-group-item-danger\' : \'\'}}"><button type=submit class="btn btn-success">Guardar cambios</button> <button type=button class="btn btn-danger" ng-click=cancelar_editar()>Cancelar</button></li></form><!-- datos de actividad --><li class="list-group-item {{!actividad.es_activo ? \'list-group-item-danger\' : \'\'}} group-item-info" ng-hide=actividad.ver_editar><div class=row><div class=col-md-6><p><strong>Equipo:</strong> {{actividad.equipo.nombre}}</p><p><strong>Marca:</strong> {{actividad.equipo.marca}}</p><p><strong>Modelo:</strong> {{actividad.equipo.modelo}}</p><p><strong>Tipo:</strong> {{actividad.equipo.tipo ? actividad.equipo.tipo.nombre : \'Sin asignar\'}} | <strong>Capacidad:</strong> {{actividad.equipo.capacidad}} | <strong>Serie:</strong> {{actividad.equipo.serie}} | <strong>Antiguedad:</strong> {{actividad.equipo.antiguedad}}</p></div><div class=col-md-6><p><strong>Operador:</strong> {{actividad.creador.name}}</p><p><strong>Motivo visita:</strong> {{actividad.motivo_visita}}</p><p><strong>Ubicación:</strong> {{actividad.ubicacion.nombre}}</p><p ng-show=actividad.solicitante><strong>Solicitante:</strong> {{actividad.solicitante}}</p></div></div></li><a href=# class="list-group-item {{!actividad.es_activo ? \'list-group-item-danger\' : \'\'}}" ng-init="actividad.ver_parametros = false" ng-click="actividad.ver_parametros = !actividad.ver_parametros"><span class=azul-destacado>{{actividad.ver_parametros ? \'Ocultar parámetros\' : \'Ver parámetros\'}}</span></a><li class="list-group-item {{!actividad.es_activo ? \'list-group-item-danger\' : \'\'}}" ng-hide="actividad.ver_editar || !actividad.ver_parametros"><div class=row><div class=col-md-6><div class=row><div class=col-md-12><p><strong>C. Compresor N°1</strong></p></div><div class=col-md-4><p><strong>R:</strong> {{actividad.parametros.compresor_n1_r}}</p></div><div class=col-md-4><p><strong>S:</strong> {{actividad.parametros.compresor_n1_s}}</p></div><div class=col-md-4><p><strong>T:</strong> {{actividad.parametros.compresor_n1_t}}</p></div></div></div><div class=col-md-6><div class=row><div class=col-md-12><p><strong>C. Compresor N°2</strong></p></div><div class=col-md-4><p><strong>R:</strong> {{actividad.parametros.compresor_n2_r}}</p></div><div class=col-md-4><p><strong>S:</strong> {{actividad.parametros.compresor_n2_s}}</p></div><div class=col-md-4><p><strong>T:</strong> {{actividad.parametros.compresor_n2_t}}</p></div></div></div></div><div class=row><div class=col-md-2><p><strong>P. Succión:</strong> {{actividad.parametros.p_succion}}</p></div><div class=col-md-2><p><strong>P. Descarga:</strong> {{actividad.parametros.p_descarga}}</p></div><div class=col-md-2><p><strong>T. Inyección:</strong> {{actividad.parametros.t_inyeccion}}</p></div><div class=col-md-2><p><strong>T. Retorno:</strong> {{actividad.parametros.t_retorno}}</p></div><div class=col-md-2><p><strong>T. Ambiente:</strong> {{actividad.parametros.t_ambiente}}</p></div><div class=col-md-2><p><strong>T. Exterior:</strong> {{actividad.parametros.t_exterior}}</p></div></div><p><small>Fecha ingreso: {{actividad.parametros.fecha_ingreso | date:\'dd/MM/yyyy HH:mm\'}}</small></p></li><a href=# class="list-group-item {{!actividad.es_activo ? \'list-group-item-danger\' : \'\'}}" ng-init="actividad.ver_textos = false" ng-click="actividad.ver_textos = !actividad.ver_textos"><span class=azul-destacado>{{actividad.ver_textos ? \'Ocultar observaciones\' : \'Ver observaciones\'}}</span></a><li class="list-group-item {{!actividad.es_activo ? \'list-group-item-danger\' : \'\'}}" ng-hide="actividad.ver_editar || !actividad.ver_textos"><div class=row><div class=col-md-4><p><strong>Estado inicial equipo</strong></p><p class=string-multiline>{{actividad.estado_inicial.texto}}</p><img delete-on-error-src class=img-responsive src=/api/actividad/estado_inicial/imagen/{{actividad._id}}><p><small>Fecha ingreso: {{actividad.estado_inicial.fecha_ingreso | date:\'dd/MM/yyyy HH:mm\'}}</small></p></div><div class=col-md-4><p><strong>Trabajos realizados</strong></p><p class=string-multiline>{{actividad.trabajos_realizados.texto}}</p><p ng-show="actividad.trabajos_realizados.trabajos && actividad.trabajos_realizados.trabajos.length > 0"><small><strong><!-- <span class="glyphicon glyphicon-wrench"></span>  -->Se realizaron {{actividad.trabajos_realizados.trabajos.length}} trabajos para equipo tipo {{actividad.equipo.tipo ? actividad.equipo.tipo.nombre : \'Sin asignar\'}}:</strong> <span class=underline-hover ng-repeat="trabajo in actividad.trabajos_realizados.trabajos | orderBy: \'nombre\'"><strong>({{$index + 1}})</strong> {{trabajo.nombre + ($last ? \'.\':\', \')}}</span></small></p><img delete-on-error-src class=img-responsive src=/api/actividad/trabajos_realizados/imagen/{{actividad._id}}><p><small>Fecha ingreso: {{actividad.trabajos_realizados.fecha_ingreso | date:\'dd/MM/yyyy HH:mm\'}}</small></p></div><div class=col-md-4><p><strong>Recomendaciones</strong></p><p class=string-multiline>{{actividad.recomendaciones.texto}}</p><p><small>Fecha ingreso: {{actividad.recomendaciones.fecha_ingreso | date:\'dd/MM/yyyy HH:mm\'}}</small></p></div><div class=col-md-12><p><strong>Observación gerencia</strong></p><p class=string-multiline>{{actividad.observacion.texto ? actividad.observacion.texto : \'Sin datos para mostrar\'}}</p><p><small>Fecha ingreso: {{actividad.observacion.fecha_ingreso | date:\'dd/MM/yyyy HH:mm\'}}</small></p></div></div></li></ul></div></div></div><footer></footer>'),
a.put("app/admin/admin.html",'<navbar></navbar><div class=container><div class=row><div class=col-md-12><h1>Usuarios</h1></div></div><div class=row><div class=col-md-12><!-- form para agregar usuarios --><ul class=list-group><li class=list-group-item><a href=# ng-click="model.ver_agregar = !model.ver_agregar;"><strong>Nuevo usuario</strong></a></li><li class=list-group-item ng-show=model.ver_agregar><form name=form ng-submit=agregar()><div class=form-group><label>Nombre referencial <small>Requerido</small></label><input required class=form-control placeholder="Nombre referencial, ej: José" ng-model=model.nuevo.name></div><div class=form-group><label>Correo contacto</label><input class=form-control placeholder="ej: jose@topair.cl" ng-model=model.nuevo.correo></div><div class=form-group><label>Nombre de usuario <small>Requerido</small></label><input required class=form-control placeholder="Nombre de usuario, ej: usuario12" ng-model=model.nuevo.email><p class=help-block>Nombre de usuario debe ser único.</p></div><div class=form-group><label>Contraseña <small>Requerido</small></label><input type=password name=password class=form-control ng-model=model.nuevo.password placeholder="Solo números y letras, debe tener entre 3 a 10 caracteres" maxlength=10 minlength=3 required pattern="[A-Za-z0-9]+"><p class=help-block>Solo números y letras, debe tener entre 3 a 10 caracteres.</p></div><div class=form-group><label>Rol <small>Requerido</small></label><select ng-model=model.nuevo.role class=form-control><option ng-repeat="rol in model.roles" value={{rol.valor}}>{{rol.nombre}}</option></select></div><button type=submit class="btn btn-default">Agregar</button></form></li></ul></div></div><ul class=list-group><li class=list-group-item><strong>Usuarios</strong></li><li class=list-group-item ng-if="!model.users || (model.users && model.users.length === 0)">Sin usuarios para mostrar</li><li ng-repeat="user in model.users | orderBy: \'nombre\'| orderBy: \'-es_activo\'" ng-class="user.es_activo ? \'list-group-item\':\'list-group-item list-group-item-danger\'"><span ng-hide=user.ver_editar><strong>{{user.name}}</strong> <span ng-show="user.role === \'admin\'" class="label label-primary">Es administrador</span><br><span class=text-muted>{{user.email}}</span></span><!-- form editar datos de usuario --><form ng-submit=editar(user) ng-show=user.ver_editar><div class=form-group><label>Nombre referencial <small>Requerido</small></label><input required class=form-control placeholder="Nombre referencial, ej: José" ng-model=user.user_editar.name></div><div class=form-group><label>Correo contacto</label><input class=form-control placeholder="ej: jose@topair.cl" ng-model=user.user_editar.correo></div><div class=form-group><label>Nombre de usuario <small>Requerido</small></label><input required class=form-control placeholder="Nombre de usuario, ej: usuario12" ng-model=user.user_editar.email><p class=help-block>Nombre de usuario debe ser único.</p></div><div class=form-group><label>Contraseña <small>Opcional, agregar solo para sobrescribir contraseña actual</small></label><input type=password name=password class=form-control ng-model=user.user_editar.password placeholder="Solo números y letras, debe tener entre 3 a 10 caracteres" maxlength=10 minlength=3 pattern="[A-Za-z0-9]+"><p class=help-block>Solo números y letras, debe tener entre 3 a 10 caracteres.</p></div><div class=form-group><label>Rol <small>Requerido</small></label><select ng-model=user.user_editar.role class=form-control><option ng-repeat="rol in model.roles" value={{rol.valor}}>{{rol.nombre}}</option></select></div><button type=submit class="btn btn-default">Guardar</button> <button type=button class="btn btn-default" ng-click=ocultar_form_editar(user)>Cancelar</button></form><span ng-hide=user.ver_editar><a ng-show=user.es_activo ng-click=desactivar(user) class="text-danger pull-right" title="Desactivar usuario"><span class="glyphicon glyphicon-trash"></span></a> <a ng-show=!user.es_activo ng-click=activar(user) class="text-success pull-right" title="Activar usuario"><span class="glyphicon glyphicon-ok"></span></a> <a ng-click=ver_form_editar(user) class="text-primary pull-right" title="Editar datos de usuario"><span class="glyphicon glyphicon-edit"></span></a></span></li></ul></div>'),a.put("app/calendario/calendario.html",'<div class=input-group><input class=form-control datepicker-popup=dd/MM/yyyy ng-model=dateModel is-open=opened min=minDate max="\'2015-06-22\'" datepicker-options=dateOptions date-disabled="disabled(date, mode)" ng-required=true close-text=Cerrar clear-text=Limpiar current-text="Hoy"> <span class=input-group-btn><button class="btn btn-default" ng-click=open($event)><i class="glyphicon glyphicon-calendar"></i></button></span></div>'),a.put("app/clientes/clientes.html",'<navbar></navbar><div class=container><div class=row><div class=col-md-12><h1>Clientes</h1></div></div><div class=row><div class=col-md-12><ul class=list-group><li class=list-group-item><a href=# ng-click="model.ver_agregar = !model.ver_agregar;"><strong>Nuevo cliente</strong></a></li><li class=list-group-item ng-show=model.ver_agregar><form ng-submit=agregar()><div class=form-group><label>Nombre referencial <small>requerido</small></label><input required class=form-control placeholder="Nombre referencial cliente" ng-model=model.nuevo.nombre></div><div class=form-group><label>Correos</label><input class=form-control placeholder="Correos del cliente" ng-model=model.nuevo.correos ng-list=, ng-trim=true><p class=help-block>Para agregar multiples correos ocupe \',\' (coma) como separador.</p></div><div class=form-group><label>Nombre de contacto</label><input class=form-control placeholder="Nombre de contacto" ng-model=model.nuevo.contacto></div><div class=form-group><label>Teléfono de contacto</label><input class=form-control placeholder="Teléfono de contacto" ng-model=model.nuevo.telefono></div><div class=form-group><label>Dirección empresa</label><input class=form-control placeholder="Dirección empresa" ng-model=model.nuevo.direccion></div><div class=form-group><label>Logo</label><input type=file class=form-control placeholder="Logo cliente" ng-model=model.nuevo.logo base-sixty-four-input><p class=help-block>Debe seleccionar una imagen de tamaño menor a 2MB y tipo JPG.</p></div><button type=submit class="btn btn-default">Nuevo cliente</button></form></li></ul></div></div><div class=row><div class=col-md-12><!-- lista de clientes --><ul class=list-group><li class=list-group-item><a href=# ng-click="model.ver_activos = !model.ver_activos;"><strong>Clientes activos</strong></a></li><li class=list-group-item ng-show="!model.clientes || (model.clientes && model.clientes.length == 0)">Sin datos para mostrar</li><li class="list-group-item {{!cliente.es_activo ? \'list-group-item-danger\' : \'\'}}" ng-repeat="cliente in model.clientes | orderBy: \'nombre\' | orderBy: \'-es_activo\'" ng-show=model.ver_activos><div class=row ng-hide=cliente.ver_editar><div class=col-md-2><img class="img-responsive center-block" on-error-src=/assets/images/no-image.a1224aaa.png ng-src=/api/cliente/logo/{{cliente._id}} ng-if=!cliente.ver_editar></div><div class=col-md-10><strong>{{cliente.nombre}}</strong><br><strong>Correos:</strong> <span>{{cliente.correos && cliente.correos.length > 0 ? cliente.correos.join(\', \') : \'Sin correos asociado.\'}}</span><br><strong>Nombre de contacto:</strong> {{cliente.contacto || \'Sin asignar.\'}} | <strong>Teléfono de contacto:</strong> {{cliente.telefono || \'Sin asignar.\'}} | <strong>Dirección empresa:</strong> {{cliente.direccion || \'Sin asignar.\'}}<br><small>Fecha creación: {{cliente.fecha_creacion | date:\'dd/MM/yyyy HH:mm\'}}</small> <small ng-show=cliente.fecha_modificacion>Última modificación: {{cliente.fecha_modificacion | date:\'dd/MM/yyyy HH:mm\'}}</small> <a href=# title="{{cliente.es_activo ? \'Desactivar\' : \'Activar\'}} cliente" class=pull-right ng-click="cliente.es_activo ? desactivar(cliente) : activar(cliente)"><span class="glyphicon glyphicon-{{cliente.es_activo ? \'trash\' : \'ok\'}}"></span></a> <a href=# title="Editar datos de cliente" class=pull-right ng-click=ver_form_editar(cliente)><span class="glyphicon glyphicon-edit"></span></a></div></div><form ng-submit=editar(cliente) ng-show=cliente.ver_editar><div class=form-group><label>Nombre referencial <small>requerido</small></label><input required class=form-control placeholder="Nombre referencial cliente" ng-model=cliente.editar.nombre></div><div class=form-group><label>Correos</label><input class=form-control placeholder="Correos del cliente" ng-model=cliente.editar.correos ng-list=, ng-trim=true><p class=help-block>Para agregar multiples correos ocupe \',\' (coma) como separador.</p></div><div class=form-group><label>Nombre de contacto</label><input class=form-control placeholder="Nombre de contacto" ng-model=cliente.editar.contacto></div><div class=form-group><label>Teléfono de contacto</label><input class=form-control placeholder="Teléfono de contacto" ng-model=cliente.editar.telefono></div><div class=form-group><label>Dirección empresa</label><input class=form-control placeholder="Dirección empresa" ng-model=cliente.editar.direccion></div><div class=form-group><label>Logo</label><input type=file class=form-control placeholder="Logo cliente" ng-model=cliente.editar.logo base-sixty-four-input><p class=help-block>Debe seleccionar una imagen de tamaño menor a 2MB y tipo JPG.</p></div><button type=submit class="btn btn-default">Guardar</button> <button type=button class="btn btn-default" ng-click=ocultar_form_editar(cliente)>Cancelar</button></form></li></ul></div></div></div><footer></footer>'),a.put("app/equipos/equipos.html",'<navbar></navbar><div class=container><div class=row><div class=col-md-12><h1>Equipos</h1></div></div><div class=row><div class=col-md-12><ul class=list-group><li class=list-group-item><a href=# ng-click="model.ver_agregar = !model.ver_agregar;">Agregar equipo</a> | <a href=# ui-sref=tiposequipos>Tipos de equipos y trabajos asociados</a></li><li class=list-group-item ng-show=model.ver_agregar><form ng-submit=agregar()><div class=form-group><label>Nombre referencial <small>requerido</small></label><input required class=form-control placeholder="Nombre referencial equipo" ng-model=model.nuevo.nombre></div><div class=row><div class=col-md-4><div class=form-group><label>Serie <small>requerido</small></label><input required class=form-control placeholder="Número de serie" ng-model=model.nuevo.serie></div></div><div class=col-md-4><div class=form-group><label>Marca</label><input class=form-control placeholder=Marca ng-model=model.nuevo.marca></div></div><div class=col-md-4><div class=form-group><label>Capacidad</label><input class=form-control placeholder=Capacidad ng-model=model.nuevo.capacidad></div></div><div class=col-md-4><div class=form-group><label>Modelo</label><input class=form-control placeholder=Modelo ng-model=model.nuevo.modelo></div></div><div class=col-md-4><div class=form-group><label>Tipo</label><select ng-model=model.nuevo.tipo class=form-control><option value="">Seleccione un elemento de la lista ...</option><option ng-repeat="item in model.tipos" value={{item._id}}>{{item.nombre}}</option></select></div></div><div class=col-md-4><div class=form-group><label>Antiguedad</label><input class=form-control placeholder=Antiguedad ng-model=model.nuevo.antiguedad></div></div></div><button type=submit class="btn btn-success">Agregar equipo</button></form></li></ul></div></div><div class=row><div class=col-md-12><ul class=list-group><li class=list-group-item>Equipos</li><li class=list-group-item ng-show="!model.equipos || (model.equipos && model.equipos.length == 0)">Sin datos para mostrar</li><li class="list-group-item {{!equipo.es_activo ? \'list-group-item-danger\' : \'\'}}" ng-repeat="equipo in model.equipos | orderBy: \'nombre\' | orderBy: \'-es_activo\'" ng-show=model.ver_activos><div class=row><div class=col-md-3 ng-show=equipo.ver_qr id=div_qr_{{equipo._id}}><qr text=equipo._id size=200 id=qr_{{equipo._id}} image=true class=equipo_qr></qr><a href=# title=Imprimir ng-click=imprimir_single(equipo)>Imprimir</a></div><div class="col-md-{{equipo.ver_qr ? \'9\' : \'12\'}}"><span ng-hide=equipo.ver_editar><p><strong>{{equipo.nombre}}</strong></p><div class=row><div class=col-md-4><p><strong>Serie:</strong> {{equipo.serie}}</p></div><div class=col-md-4><p><strong>Marca:</strong> {{equipo.marca}}</p></div><div class=col-md-4><p><strong>Capacidad:</strong> {{equipo.capacidad}}</p></div><div class=col-md-4><p><strong>Modelo:</strong> {{equipo.modelo}}</p></div><div class=col-md-4><p><strong>Tipo:</strong> {{equipo.tipo ? equipo.tipo.nombre : \'Sin asignar\'}}</p></div><div class=col-md-4><p><strong>Antiguedad:</strong> {{equipo.antiguedad}}</p></div></div><br><small><a href=# ng-click="equipo.ver_qr = !equipo.ver_qr" class="glyphicon glyphicon-qrcode" title="{{equipo.ver_qr ? \'Ocultar\' : \'Mostrar\'}} código QR"></a> |</small> <small>Fecha creación: {{equipo.fecha_creacion | date:\'dd/MM/yyyy HH:mm\'}}</small> <small ng-show=equipo.fecha_modificacion>Última modificación: {{equipo.fecha_modificacion | date:\'dd/MM/yyyy HH:mm\'}}</small> <a href=# title="{{equipo.es_activo ? \'Desactivar\' : \'Activar\'}} equipo" class=pull-right ng-click="equipo.es_activo ? desactivar(equipo) : activar(equipo)"><span class="glyphicon glyphicon-{{equipo.es_activo ? \'trash\' : \'ok\'}}"></span></a> <a href=# title="Editar datos de equipo" class=pull-right ng-click=ver_form_editar(equipo)><span class="glyphicon glyphicon-edit"></span></a></span><form ng-submit=editar(equipo) ng-show=equipo.ver_editar><div class=form-group><label>Nombre referencial <small>requerido</small></label><input required class=form-control placeholder="Nombre referencial equipo" ng-model=equipo.editar.nombre></div><div class=form-group><label>Serie <small>requerido</small></label><input required class=form-control placeholder="Número de serie" ng-model=equipo.editar.serie></div><div class=row><div class=col-md-4><div class=form-group><label>Serie <small>requerido</small></label><input required class=form-control placeholder="Número de serie" ng-model=equipo.editar.serie></div></div><div class=col-md-4><div class=form-group><label>Marca</label><input class=form-control placeholder=Marca ng-model=equipo.editar.marca></div></div><div class=col-md-4><div class=form-group><label>Capacidad</label><input class=form-control placeholder=Capacidad ng-model=equipo.editar.capacidad></div></div><div class=col-md-4><div class=form-group><label>Modelo</label><input class=form-control placeholder=Modelo ng-model=equipo.editar.modelo></div></div><div class=col-md-4><div class=form-group><label>Tipo</label><select class=form-control ng-options="item as item.nombre for item in model.tipos track by item._id" ng-model=equipo.editar.tipo></select></div></div><div class=col-md-4><div class=form-group><label>Antiguedad</label><input class=form-control placeholder=Antiguedad ng-model=equipo.editar.antiguedad></div></div></div><button type=submit class="btn btn-default">Guardar</button> <button type=button class="btn btn-default" ng-click=ocultar_form_editar(equipo)>Cancelar</button></form></div></div></li></ul></div></div></div><footer></footer>'),a.put("app/main/main.html",'<navbar></navbar><div class=container><div class=row><div class=col-md-12><div class=jumbotron><h1 class=text-center>Registro de mantenciones</h1><img src=/assets/images/logo-topair.eed111af.png class="img-responsive center-block"></div></div></div></div><footer></footer>'),a.put("app/proyectos/proyectos.html",'<navbar></navbar><div class=container><div class=row><div class=col-md-12><h1>Contratos</h1></div></div><div class=row><div class=col-md-12><!-- form para agregar proyectos --><ul class=list-group><li class=list-group-item><a href=# ng-click="model.ver_agregar = !model.ver_agregar;"><strong>Nuevo contrato</strong></a></li><li class=list-group-item ng-show=model.ver_agregar><form ng-submit=agregar()><div class=form-group><label>Cliente <small>requerido</small></label><select ng-model=model.nuevo.cliente class=form-control><option ng-repeat="cliente in model.clientes" value={{cliente._id}}>{{cliente.nombre}}</option></select></div><div class=row><div class=col-md-6><div class=form-group><label>Nombre referencial <small>requerido</small></label><input required class=form-control placeholder="Nombre referencial contrato" ng-model=model.nuevo.nombre></div></div><div class=col-md-6><div class=form-group><label>Número de contrato</label><input class=form-control placeholder="Número de contrato" ng-model=model.nuevo.numero></div></div></div><div class=row><div class=col-md-4><div class=form-group><label>Tipo contrato</label><input required class=form-control placeholder="Tipo contrato" ng-model=model.nuevo.tipo></div></div><div class=col-md-4><div class=form-group><label>Especialidad</label><input required class=form-control placeholder=Especialidad ng-model=model.nuevo.especialidad></div></div><div class=col-md-4><div class=form-group><label>Periodo</label><input required class=form-control placeholder=Periodo ng-model=model.nuevo.periodo></div></div><div class=col-md-4><div class=form-group><label>Frecuencia</label><input required class=form-control placeholder=Frecuencia ng-model=model.nuevo.frecuencia></div></div><div class=col-md-4><label>Fecha inicio</label><calendario date-model=model.nuevo.fecha_inicio date-options=model.fecha_opciones opened="false"></div><div class=col-md-4><label>Fecha finalizacion</label><calendario date-model=model.nuevo.fecha_fin date-options=model.fecha_opciones opened="false"></div></div><div class=form-group><label>Ubicaciones del contrato <small>requerido</small></label><div class=input-group><input class=form-control placeholder="Nombre ubicación" ng-model=model.nuevo.ubicacion_temp> <span class=input-group-btn><button class="btn btn-default" type=button ng-click=agregar_ubicacion_nuevo()>Agregar</button></span></div><ul class=list-group><li class=list-group-item ng-repeat="ubicacion in model.nuevo.ubicaciones track by $index">{{ubicacion}} <a href=# ng-click="model.nuevo.ubicaciones.splice($index, 1)"><span class="glyphicon glyphicon-trash pull-right"></span></a></li></ul></div><div class=form-group><label>Seleccione equipos que son parte del contrato <small>requerido</small></label><ul class="list-group scroll-lista-equipos-proyecto"><li class=list-group-item ng-show="!model.equipos || (model.equipos && model.equipos.length === 0)">Sin datos para mostrar</li><li class=list-group-item ng-repeat="equipo in model.equipos"><label><input type=checkbox ng-model=equipo.checked> {{equipo.nombre}}</label></li></ul></div><div class=form-group><label>Seleccione los usuarios asociados al contrato (pueden ver el contrato en la APP móvil)</label><ul class=list-group><li class=list-group-item ng-repeat="usuario in model.usuarios"><div class=checkbox><label><input type=checkbox ng-model=usuario.checked> {{usuario.name}}&nbsp; <span ng-show=usuario.es_admin class="label label-primary">{{usuario.glosa_rol}}</span></label></div></li></ul></div><button type=submit class="btn btn-success">Nuevo contrato</button></form></li></ul></div></div><div class=row><div class=col-md-12><!-- proyectos activos --><ul class=list-group><li class=list-group-item><!-- <a href="#" ng-click="model.ver_activos = !model.ver_activos;"> --><strong class=azul-destacado>Contratos activos</strong> | <a href=# ng-click="model.ver_inactivos = !model.ver_inactivos">{{model.ver_inactivos ? \'Ocultar contratos inactivos\' : \'Mostrar contratos inactivos\'}}</a></li><li class=list-group-item ng-show="!model.proyectos || (model.proyectos && model.proyectos.length == 0)">Sin datos para mostrar</li><li ng-repeat="proyecto in model.proyectos | orderBy: \'-fecha_creacion\' | orderBy: \'-es_activo\'" ng-show="model.ver_activos && (!model.ver_inactivos ? proyecto.es_activo : true)" class="list-group-item {{!proyecto.es_activo ? \'list-group-item-danger\' : \'\'}}"><div class=row><div class=col-md-12 ng-hide=proyecto.ver_editar><a ui-sref="actividades({id_proyecto: proyecto._id})" title="Ver trabajos"><img class="pull-left imagen-cliente-actividades" delete-on-error-src ng-src=/api/cliente/logo/{{proyecto.cliente._id}}> <span ng-show=!proyecto.es_activo class="label label-danger">Contrato inactivo</span><h3>{{proyecto.cliente && proyecto.cliente.nombre? proyecto.cliente.nombre : \'Sin cliente asociado.\'}} - {{proyecto.nombre}}</h3></a></div><div class=col-md-12 ng-hide=proyecto.ver_editar><strong>N° Contrato:</strong> <span>{{proyecto.numero || \'Sin datos para mostrar\' }}</span> | <strong>Fecha inicio:</strong> <span>{{proyecto.fecha_inicio || \'Sin datos para mostrar\' | date:\'dd/MM/yyyy\' }}</span> | <strong>Fecha finalización:</strong> <span>{{proyecto.fecha_fin || \'Sin datos para mostrar\' | date:\'dd/MM/yyyy\' }}</span><br><strong>Equipos:</strong> <span ng-show="!proyecto.equipos || (proyecto.equipos && proyecto.equipos.length === 0)">Sin equipos asociados.</span> <span ng-repeat="equipo in proyecto.equipos | orderBy: \'nombre\'">{{equipo.nombre + ($last ? \'.\':\', \')}}</span><br><strong>Ubicaciones:</strong> <span ng-show="!proyecto.ubicaciones || (proyecto.ubicaciones && proyecto.ubicaciones.length === 0)">Sin ubicaciones asociadas.</span> <span ng-repeat="ubicacion in proyecto.ubicaciones | orderBy: \'nombre\'">{{ubicacion.nombre + ($last ? \'.\':\', \')}}</span><br><strong>Asociados:</strong> <span ng-show="!proyecto.usuarios || (proyecto.usuarios && proyecto.usuarios.length === 0)">Sin usuarios asociados.</span> <span ng-repeat="usuario in proyecto.usuarios | orderBy: \'name\'">{{usuario.name + ($last ? \'.\':\', \')}}</span></div><div class=col-md-12 ng-show=proyecto.ver_editar><!-- form editar contrato activo --><form ng-submit=editar(proyecto)><div class=form-group><label>Cliente <small>requerido</small></label><select ng-model=proyecto.editar.cliente class=form-control><option ng-repeat="cliente in model.clientes" value={{cliente._id}}>{{cliente.nombre}}</option></select></div><div class=row><div class=col-md-6><div class=form-group><label>Nombre referencial <small>requerido</small></label><input required class=form-control placeholder="Nombre referencial contrato" ng-model=proyecto.editar.nombre></div></div><div class=col-md-6><div class=form-group><label>Número de contrato</label><input class=form-control placeholder="Número de contrato" ng-model=proyecto.editar.numero></div></div></div><div class=row><div class=col-md-4><div class=form-group><label>Tipo contrato</label><input required class=form-control placeholder="Tipo contrato" ng-model=proyecto.editar.tipo></div></div><div class=col-md-4><div class=form-group><label>Especialidad</label><input required class=form-control placeholder=Especialidad ng-model=proyecto.editar.especialidad></div></div><div class=col-md-4><div class=form-group><label>Periodo</label><input required class=form-control placeholder=Periodo ng-model=proyecto.editar.periodo></div></div><div class=col-md-4><div class=form-group><label>Frecuencia</label><input required class=form-control placeholder=Frecuencia ng-model=proyecto.editar.frecuencia></div></div><div class=col-md-4><label>Fecha inicio</label><calendario date-model=proyecto.editar.fecha_inicio date-options=model.fecha_opciones opened="false"></div><div class=col-md-4><label>Fecha finalizacion</label><calendario date-model=proyecto.editar.fecha_fin date-options=model.fecha_opciones opened="false"></div></div><div class=form-group><label>Ubicaciones del contrato <small>requerido</small></label><div class=input-group><input class=form-control placeholder="Nombre ubicación" ng-model=proyecto.editar.ubicacion_temp> <span class=input-group-btn><button class="btn btn-default" type=button ng-click=agregar_ubicacion_editar(proyecto)>Agregar</button></span></div><ul class=list-group><li class=list-group-item ng-repeat="ubicacion in proyecto.editar.ubicaciones track by $index | orderBy: \'nombre\'"><span ng-show=!ubicacion.ver_editar>{{ubicacion.nombre}} <a href=# ng-click="proyecto.editar.ubicaciones.splice($index, 1)"><span class="glyphicon glyphicon-trash pull-right"></span></a> <a href=# ng-show=ubicacion._id ng-click="ubicacion.nombre_temp = ubicacion.nombre; ubicacion.ver_editar = true;"><span class="glyphicon glyphicon-edit pull-right"></span></a></span> <span ng-show=ubicacion.ver_editar><div class=form-group><label>Nombre ubicación <small>requerido</small></label><input class=form-control placeholder="Nombre referencial ubicación" ng-model=ubicacion.nombre_temp></div><button type=button class="btn btn-default" ng-click=guardar_ubicacion_editada(ubicacion)>Guardar</button> <button type=button class="btn btn-default" ng-click="ubicacion.ver_editar = false; ubicacion.nombre_temp = \'\';">Cancelar</button></span></li></ul></div><div class=form-group><label>Seleccione equipos que son parte del contrato <small>requerido</small></label><ul class="list-group scroll-lista-equipos-proyecto"><li class=list-group-item ng-show="!model.equipos || (model.equipos && model.equipos.length === 0)">Sin datos para mostrar</li><li class=list-group-item ng-repeat="equipo in proyecto.editar.equipos"><label><input type=checkbox ng-model=equipo.checked> {{equipo.nombre}}</label></li></ul></div><div class=form-group><label>Seleccione los usuarios asociados al contrato</label><ul class=list-group><li class=list-group-item ng-repeat="usuario in proyecto.editar.usuarios"><label><input type=checkbox ng-model=usuario.checked> {{usuario.name}}&nbsp; <span ng-show=usuario.es_admin class="label label-primary">{{usuario.glosa_rol}}</span></label></li></ul></div><button type=submit class="btn btn-default">Guardar</button> <button type=button class="btn btn-default" ng-click=ocultar_form_editar(proyecto)>Cancelar</button></form></div><div class=col-md-12 ng-hide=proyecto.ver_editar><hr><small>Fecha creación: {{proyecto.fecha_creacion | date:\'dd/MM/yyyy HH:mm\'}}</small> <small ng-show=proyecto.fecha_modificacion>Última modificación: {{proyecto.fecha_modificacion | date:\'dd/MM/yyyy HH:mm\'}}</small> <a href=# title="Desactivar el contrato" class=pull-right ng-click=desactivar(proyecto)><span class="glyphicon glyphicon-trash"></span></a> <a href=# title="Editar datos del contrato" class=pull-right ng-click=ver_form_editar(proyecto)><span class="glyphicon glyphicon-edit"></span></a></div></div></li></ul></div></div></div><footer></footer>'),a.put("app/resumen/resumen.html","<navbar></navbar><div class=container><ul class=list-group><li class=list-group-item><div class=row><div class=\"col-md-4 col-md-offset-1 col-sm-4 col-sm-offset-1\"><img class=\"img-responsive center-block h-img-header-resumen\" delete-on-error-src ng-src=/api/cliente/logo/{{model.resumen.proyecto.cliente._id}}></div><div class=\"col-md-2 col-sm-2\"><img class=\"img-responsive center-block h-img-header-resumen\" src=/assets/images/manos.1b72faa1.png></div><div class=\"col-md-4 col-sm-4\"><img class=\"img-responsive center-block h-img-header-resumen\" src=/assets/images/logo-topair.aead4393.jpg></div></div></li><li class=list-group-item><h1 class=\"text-center azul-destacado\">{{model.resumen.proyecto.cliente.nombre}}</h1><h2 class=\"text-center azul-destacado\">{{model.resumen.proyecto.nombre}}</h2></li><li class=list-group-item><div class=row><div class=\"col-md-6 col-sm-6\"><dl><dt>N° de Contrato:</dt><dd>{{model.resumen.proyecto.numero || 'Sin asignar.'}}</dd><dt>Periodicidad:</dt><dd>{{model.resumen.proyecto.periodo || 'Sin asignar.'}}</dd></dl></div><div class=\"col-md-6 col-sm-6\"><dl><dt>Especialidad:</dt><dd>{{model.resumen.proyecto.especialidad || 'Sin asignar.'}}</dd><dt>Fecha inicio:</dt><dd>{{model.resumen.proyecto.fecha_inicio || 'Sin datos para mostrar' | date:'dd/MM/yyyy' }}</dd><dt>Fecha finalización:</dt><dd>{{model.resumen.proyecto.fecha_fin || 'Sin datos para mostrar' | date:'dd/MM/yyyy' }}</dd></dl></div></div></li><li class=list-group-item><h3>Resumen general</h3><p class=string-multiline>{{model.resumen.observacion}}</p></li><li class=list-group-item><h3>Detalle de trabajos realizados</h3><ul class=list-group><li class=list-group-item ng-click=\"model.ver_rojos = !model.ver_rojos\"><span class=\"label label-danger label-bandera-resumen\">{{model.resumen.actividades && model.resumen.actividades.length > 0 && model.rojos && model.rojos.length > 0 ? (100 * model.rojos.length / model.resumen.actividades.length) : 0 | number: 0}}%</span> <span>Equipos que presentan dificultades</span> <span class=\"glyphicon glyphicon-chevron-{{model.ver_rojos ? 'up' : 'down'}} pull-right icono-bandera-resumen icono-color-negro\"></span></li><li class=list-group-item ng-show=model.ver_rojos ng-repeat=\"actividad in model.rojos = (model.resumen.actividades | filter: { indicador: { es_rojo: true }})\"><ul class=list-group><li class=list-group-item><div class=row><div class=col-md-6><p><strong>Equipo:</strong> {{actividad.equipo.nombre}}</p><p><strong>Marca:</strong> {{actividad.equipo.marca}}</p><p><strong>Modelo:</strong> {{actividad.equipo.modelo}}</p><p><strong>Tipo:</strong> {{actividad.equipo.tipo ? actividad.equipo.tipo.nombre : 'Sin asignar'}} | <strong>Capacidad:</strong> {{actividad.equipo.capacidad}} | <strong>Serie:</strong> {{actividad.equipo.serie}} | <strong>Antiguedad:</strong> {{actividad.equipo.antiguedad}}</p></div><div class=col-md-6><p><strong>Operador:</strong> {{actividad.creador.name}}</p><p><strong>Motivo visita:</strong> {{actividad.motivo_visita}}</p><p><strong>Ubicación:</strong> {{actividad.ubicacion.nombre}}</p><p ng-show=actividad.solicitante><strong>Solicitante:</strong> {{actividad.solicitante}}</p></div></div></li><a href=# class=list-group-item ng-init=\"actividad.ver_textos = true\" ng-click=\"actividad.ver_textos = !actividad.ver_textos\"><span class=azul-destacado>{{actividad.ver_textos ? 'Click para ocultar observaciones' : 'Click para ver observaciones'}}</span></a><li class=list-group-item ng-show=actividad.ver_textos><div class=row><div class=col-md-4><p><strong>Etapa 1 - Estado inicial equipo</strong></p><p class=string-multiline>{{actividad.estado_inicial.texto}}</p><img delete-on-error-src class=img-responsive src=/api/actividad/estado_inicial/imagen/{{actividad._id}}><p><small>Fecha ingreso: {{actividad.estado_inicial.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div><div class=col-md-4><p><strong>Etapa 2 - Trabajos realizados</strong></p><p class=string-multiline>{{actividad.trabajos_realizados.texto}}</p><img delete-on-error-src class=img-responsive src=/api/actividad/trabajos_realizados/imagen/{{actividad._id}}><p><small>Fecha ingreso: {{actividad.trabajos_realizados.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div><div class=col-md-4><p><strong>Etapa 3 - Recomendaciones</strong></p><p class=string-multiline>{{actividad.recomendaciones.texto}}</p><p><small>Fecha ingreso: {{actividad.recomendaciones.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div><div class=col-md-12><p><strong>Observación gerencia</strong></p><p class=string-multiline>{{actividad.observacion.texto ? actividad.observacion.texto : 'Sin datos para mostrar'}}</p><p><small>Fecha ingreso: {{actividad.observacion.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div></div></li><a href=# class=list-group-item ng-init=\"actividad.ver_parametros = false\" ng-click=\"actividad.ver_parametros = !actividad.ver_parametros\"><span class=azul-destacado>{{actividad.ver_parametros ? 'Click para ocultar parámetros' : 'Click para ver parámetros'}}</span></a><li class=list-group-item ng-hide=\"actividad.ver_editar || !actividad.ver_parametros\"><div class=row><div class=col-md-6><div class=row><div class=col-md-12><p><strong>C. Compresor N°1</strong></p></div><div class=col-md-4><p><strong>R:</strong> {{actividad.parametros.compresor_n1_r}}</p></div><div class=col-md-4><p><strong>S:</strong> {{actividad.parametros.compresor_n1_s}}</p></div><div class=col-md-4><p><strong>T:</strong> {{actividad.parametros.compresor_n1_t}}</p></div></div></div><div class=col-md-6><div class=row><div class=col-md-12><p><strong>C. Compresor N°2</strong></p></div><div class=col-md-4><p><strong>R:</strong> {{actividad.parametros.compresor_n2_r}}</p></div><div class=col-md-4><p><strong>S:</strong> {{actividad.parametros.compresor_n2_s}}</p></div><div class=col-md-4><p><strong>T:</strong> {{actividad.parametros.compresor_n2_t}}</p></div></div></div></div><div class=row><div class=col-md-2><p><strong>P. Succión:</strong> {{actividad.parametros.p_succion}}</p></div><div class=col-md-2><p><strong>P. Descarga:</strong> {{actividad.parametros.p_descarga}}</p></div><div class=col-md-2><p><strong>T. Inyección:</strong> {{actividad.parametros.t_inyeccion}}</p></div><div class=col-md-2><p><strong>T. Retorno:</strong> {{actividad.parametros.t_retorno}}</p></div><div class=col-md-2><p><strong>T. Ambiente:</strong> {{actividad.parametros.t_ambiente}}</p></div><div class=col-md-2><p><strong>T. Exterior:</strong> {{actividad.parametros.t_exterior}}</p></div></div><p><small>Fecha ingreso: {{actividad.parametros.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></li></ul></li><li class=list-group-item ng-show=\"model.ver_rojos && (!model.rojos || (model.rojos && model.rojos.length === 0))\"><span>Sin datos para mostrar.</span></li><li class=list-group-item ng-click=\"model.ver_amarillos = !model.ver_amarillos\"><span class=\"label label-warning label-bandera-resumen color-amarillo\">{{model.resumen.actividades && model.resumen.actividades.length > 0 && model.amarillos && model.amarillos.length > 0 ? (100 * model.amarillos.length / model.resumen.actividades.length) : 0 | number: 0}}%</span> <span>Equipos con alertas preventivas</span> <span class=\"glyphicon glyphicon-chevron-{{model.ver_amarillos ? 'up' : 'down'}} pull-right icono-bandera-resumen\"></span></li><li class=list-group-item ng-show=model.ver_amarillos ng-repeat=\"actividad in model.amarillos = (model.resumen.actividades | filter: { indicador: { es_amarillo: true }})\"><ul class=list-group><li class=list-group-item><div class=row><div class=col-md-6><p><strong>Equipo:</strong> {{actividad.equipo.nombre}}</p><p><strong>Marca:</strong> {{actividad.equipo.marca}}</p><p><strong>Modelo:</strong> {{actividad.equipo.modelo}}</p><p><strong>Tipo:</strong> {{actividad.equipo.tipo ? actividad.equipo.tipo.nombre : 'Sin asignar'}} | <strong>Capacidad:</strong> {{actividad.equipo.capacidad}} | <strong>Serie:</strong> {{actividad.equipo.serie}} | <strong>Antiguedad:</strong> {{actividad.equipo.antiguedad}}</p></div><div class=col-md-6><p><strong>Operador:</strong> {{actividad.creador.name}}</p><p><strong>Motivo visita:</strong> {{actividad.motivo_visita}}</p><p><strong>Ubicación:</strong> {{actividad.ubicacion.nombre}}</p><p ng-show=actividad.solicitante><strong>Solicitante:</strong> {{actividad.solicitante}}</p></div></div></li><a href=# class=list-group-item ng-init=\"actividad.ver_textos = true\" ng-click=\"actividad.ver_textos = !actividad.ver_textos\"><span class=azul-destacado>{{actividad.ver_textos ? 'Click para ocultar observaciones' : 'Click para ver observaciones'}}</span></a><li class=list-group-item ng-show=actividad.ver_textos><div class=row><div class=col-md-4><p><strong>Etapa 1 - Estado inicial equipo</strong></p><p class=string-multiline>{{actividad.estado_inicial.texto}}</p><img delete-on-error-src class=img-responsive src=/api/actividad/estado_inicial/imagen/{{actividad._id}}><p><small>Fecha ingreso: {{actividad.estado_inicial.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div><div class=col-md-4><p><strong>Etapa 2 - Trabajos realizados</strong></p><p class=string-multiline>{{actividad.trabajos_realizados.texto}}</p><img delete-on-error-src class=img-responsive src=/api/actividad/trabajos_realizados/imagen/{{actividad._id}}><p><small>Fecha ingreso: {{actividad.trabajos_realizados.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div><div class=col-md-4><p><strong>Etapa 3 - Recomendaciones</strong></p><p class=string-multiline>{{actividad.recomendaciones.texto}}</p><p><small>Fecha ingreso: {{actividad.recomendaciones.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div><div class=col-md-12><p><strong>Observación gerencia</strong></p><p class=string-multiline>{{actividad.observacion.texto ? actividad.observacion.texto : 'Sin datos para mostrar'}}</p><p><small>Fecha ingreso: {{actividad.observacion.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div></div></li><a href=# class=list-group-item ng-init=\"actividad.ver_parametros = false\" ng-click=\"actividad.ver_parametros = !actividad.ver_parametros\"><span class=azul-destacado>{{actividad.ver_parametros ? 'Click para ocultar parámetros' : 'Click para ver parámetros'}}</span></a><li class=list-group-item ng-hide=\"actividad.ver_editar || !actividad.ver_parametros\"><div class=row><div class=col-md-6><div class=row><div class=col-md-12><p><strong>C. Compresor N°1</strong></p></div><div class=col-md-4><p><strong>R:</strong> {{actividad.parametros.compresor_n1_r}}</p></div><div class=col-md-4><p><strong>S:</strong> {{actividad.parametros.compresor_n1_s}}</p></div><div class=col-md-4><p><strong>T:</strong> {{actividad.parametros.compresor_n1_t}}</p></div></div></div><div class=col-md-6><div class=row><div class=col-md-12><p><strong>C. Compresor N°2</strong></p></div><div class=col-md-4><p><strong>R:</strong> {{actividad.parametros.compresor_n2_r}}</p></div><div class=col-md-4><p><strong>S:</strong> {{actividad.parametros.compresor_n2_s}}</p></div><div class=col-md-4><p><strong>T:</strong> {{actividad.parametros.compresor_n2_t}}</p></div></div></div></div><div class=row><div class=col-md-2><p><strong>P. Succión:</strong> {{actividad.parametros.p_succion}}</p></div><div class=col-md-2><p><strong>P. Descarga:</strong> {{actividad.parametros.p_descarga}}</p></div><div class=col-md-2><p><strong>T. Inyección:</strong> {{actividad.parametros.t_inyeccion}}</p></div><div class=col-md-2><p><strong>T. Retorno:</strong> {{actividad.parametros.t_retorno}}</p></div><div class=col-md-2><p><strong>T. Ambiente:</strong> {{actividad.parametros.t_ambiente}}</p></div><div class=col-md-2><p><strong>T. Exterior:</strong> {{actividad.parametros.t_exterior}}</p></div></div><p><small>Fecha ingreso: {{actividad.parametros.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></li></ul></li><li class=list-group-item ng-show=\"model.ver_amarillos && (!model.amarillos || (model.amarillos && model.amarillos.length === 0))\"><span>Sin datos para mostrar.</span></li><li class=list-group-item ng-click=\"model.ver_verdes = !model.ver_verdes\"><span class=\"label label-success label-bandera-resumen\">{{model.resumen.actividades && model.resumen.actividades.length > 0 && model.verdes && model.verdes.length > 0 ? (100 * model.verdes.length / model.resumen.actividades.length) : 0 | number: 0}}%</span> <span>Equipos sin dificultades ni alertas</span> <span class=\"glyphicon glyphicon-chevron-{{model.ver_verdes ? 'up' : 'down'}} pull-right icono-bandera-resumen\"></span></li><li class=list-group-item ng-show=model.ver_verdes ng-repeat=\"actividad in model.verdes = (model.resumen.actividades | filter: { indicador: { es_verde: true }})\"><ul class=list-group><li class=list-group-item><div class=row><div class=col-md-6><p><strong>Equipo:</strong> {{actividad.equipo.nombre}}</p><p><strong>Marca:</strong> {{actividad.equipo.marca}}</p><p><strong>Modelo:</strong> {{actividad.equipo.modelo}}</p><p><strong>Tipo:</strong> {{actividad.equipo.tipo ? actividad.equipo.tipo.nombre : 'Sin asignar'}} | <strong>Capacidad:</strong> {{actividad.equipo.capacidad}} | <strong>Serie:</strong> {{actividad.equipo.serie}} | <strong>Antiguedad:</strong> {{actividad.equipo.antiguedad}}</p></div><div class=col-md-6><p><strong>Operador:</strong> {{actividad.creador.name}}</p><p><strong>Motivo visita:</strong> {{actividad.motivo_visita}}</p><p><strong>Ubicación:</strong> {{actividad.ubicacion.nombre}}</p><p ng-show=actividad.solicitante><strong>Solicitante:</strong> {{actividad.solicitante}}</p></div></div></li><a href=# class=list-group-item ng-init=\"actividad.ver_textos = true\" ng-click=\"actividad.ver_textos = !actividad.ver_textos\"><span class=azul-destacado>{{actividad.ver_textos ? 'Click para ocultar observaciones' : 'Click para ver observaciones'}}</span></a><li class=list-group-item ng-show=actividad.ver_textos><div class=row><div class=col-md-4><p><strong>Etapa 1 - Estado inicial equipo</strong></p><p class=string-multiline>{{actividad.estado_inicial.texto}}</p><img delete-on-error-src class=img-responsive src=/api/actividad/estado_inicial/imagen/{{actividad._id}}><p><small>Fecha ingreso: {{actividad.estado_inicial.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div><div class=col-md-4><p><strong>Etapa 2 - Trabajos realizados</strong></p><p class=string-multiline>{{actividad.trabajos_realizados.texto}}</p><img delete-on-error-src class=img-responsive src=/api/actividad/trabajos_realizados/imagen/{{actividad._id}}><p><small>Fecha ingreso: {{actividad.trabajos_realizados.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div><div class=col-md-4><p><strong>Etapa 3 - Recomendaciones</strong></p><p class=string-multiline>{{actividad.recomendaciones.texto}}</p><p><small>Fecha ingreso: {{actividad.recomendaciones.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div><div class=col-md-12><p><strong>Observación gerencia</strong></p><p class=string-multiline>{{actividad.observacion.texto ? actividad.observacion.texto : 'Sin datos para mostrar'}}</p><p><small>Fecha ingreso: {{actividad.observacion.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></div></div></li><a href=# class=list-group-item ng-init=\"actividad.ver_parametros = false\" ng-click=\"actividad.ver_parametros = !actividad.ver_parametros\"><span class=azul-destacado>{{actividad.ver_parametros ? 'Click para ocultar parámetros' : 'Click para ver parámetros'}}</span></a><li class=list-group-item ng-hide=\"actividad.ver_editar || !actividad.ver_parametros\"><div class=row><div class=col-md-6><div class=row><div class=col-md-12><p><strong>C. Compresor N°1</strong></p></div><div class=col-md-4><p><strong>R:</strong> {{actividad.parametros.compresor_n1_r}}</p></div><div class=col-md-4><p><strong>S:</strong> {{actividad.parametros.compresor_n1_s}}</p></div><div class=col-md-4><p><strong>T:</strong> {{actividad.parametros.compresor_n1_t}}</p></div></div></div><div class=col-md-6><div class=row><div class=col-md-12><p><strong>C. Compresor N°2</strong></p></div><div class=col-md-4><p><strong>R:</strong> {{actividad.parametros.compresor_n2_r}}</p></div><div class=col-md-4><p><strong>S:</strong> {{actividad.parametros.compresor_n2_s}}</p></div><div class=col-md-4><p><strong>T:</strong> {{actividad.parametros.compresor_n2_t}}</p></div></div></div></div><div class=row><div class=col-md-2><p><strong>P. Succión:</strong> {{actividad.parametros.p_succion}}</p></div><div class=col-md-2><p><strong>P. Descarga:</strong> {{actividad.parametros.p_descarga}}</p></div><div class=col-md-2><p><strong>T. Inyección:</strong> {{actividad.parametros.t_inyeccion}}</p></div><div class=col-md-2><p><strong>T. Retorno:</strong> {{actividad.parametros.t_retorno}}</p></div><div class=col-md-2><p><strong>T. Ambiente:</strong> {{actividad.parametros.t_ambiente}}</p></div><div class=col-md-2><p><strong>T. Exterior:</strong> {{actividad.parametros.t_exterior}}</p></div></div><p><small>Fecha ingreso: {{actividad.parametros.fecha_ingreso | date:'dd/MM/yyyy HH:mm'}}</small></p></li></ul></li><li class=list-group-item ng-show=\"model.ver_verdes && (!model.verdes || (model.verdes && model.verdes.length === 0))\"><span>Sin datos para mostrar.</span></li></ul></li></ul></div><footer></footer>"),
a.put("app/tipoequipo/tipoequipo.html",'<navbar></navbar><div class=container><div class=row><div class=col-md-12><h1>Tipos de equipos</h1></div></div><div class=row><div class=col-md-12><ul class=list-group><li class=list-group-item><a href=# ui-sref=equipos>Volver a equipos</a> | <a href=# ng-click="model.ver_agregar = !model.ver_agregar;">Agregar tipo de equipo</a></li><li class=list-group-item ng-show=model.ver_agregar><form ng-submit=agregar()><div class=form-group><label>Nombre tipo <small>requerido</small></label><input required class=form-control placeholder="Nombre tipo" ng-model=model.nuevo.nombre></div><div class=form-group><label>Tipos de trabajos asociados</label><div class=input-group><input class=form-control placeholder="Nombre tipo de trabajo asociado" ng-model=model.nuevo.trabajo_temp> <span class=input-group-btn><button class="btn btn-default" type=button ng-click=agregar_trabajo_nuevo()>Agregar</button></span></div><ul class=list-group><li class=list-group-item ng-repeat="trabajo in model.nuevo.trabajos track by $index">{{trabajo}} <a href=# ng-click="model.nuevo.trabajos.splice($index, 1)"><span class="glyphicon glyphicon-trash pull-right"></span></a></li></ul></div><button type=submit class="btn btn-success">Agregar tipo de equipo</button> <button type=button class="btn btn-danger" ng-click=cancelar_agregar()>Cancelar</button></form></li></ul></div></div><div class=row><div class=col-md-12><ul class=list-group><li class=list-group-item>Tipo de equipos</li><li class=list-group-item ng-show="!model.tipos || (model.tipos && model.tipos.length == 0)">Sin datos para mostrar</li><li ng-repeat="tipo in model.tipos | orderBy: \'nombre\' | orderBy: \'-es_activo\'" class="list-group-item {{!tipo.es_activo ? \'list-group-item-danger\' : \'\'}}"><div ng-hide=tipo.ver_editar><p><strong>{{tipo.nombre}}</strong></p><ul class=list-unstyled ng-repeat="trabajo in tipo.trabajos | orderBy: \'nombre\'"><li>{{trabajo.nombre}}</li></ul><small>Fecha creación: {{tipo.fecha_creacion | date:\'dd/MM/yyyy HH:mm\'}}</small> | <small>Última modificación: {{tipo.fecha_modificacion | date:\'dd/MM/yyyy HH:mm\'}}</small><!-- <a href="#" title="{{tipo.es_activo ? \'Desactivar\' : \'Activar\'}} tipo de equipo" class="pull-right" ng-click="tipo.es_activo ? desactivar(tipo) : activar(tipo)"><span class="glyphicon glyphicon-{{tipo.es_activo ? \'trash\' : \'ok\'}}"></span></a> --> <a href=# title="Editar tipo de equipo" class=pull-right ng-click=ver_form_editar(tipo)><span class="glyphicon glyphicon-edit"></span></a></div><div ng-show=tipo.ver_editar><form ng-submit=editar(tipo)><div class=form-group><label>Nombre tipo <small>requerido</small></label><input required class=form-control placeholder="Nombre tipo" ng-model=tipo.editar.nombre></div><div class=form-group><label>Tipos de trabajos asociados</label><div class=input-group><input class=form-control placeholder="Nombre tipo de trabajo" ng-model=tipo.editar.trabajo_temp> <span class=input-group-btn><button class="btn btn-default" type=button ng-click=agregar_trabajo_editar(tipo)>Agregar</button></span></div><ul class=list-group><li class=list-group-item ng-repeat="trabajo in tipo.editar.trabajos track by $index | orderBy: \'nombre\'"><span ng-show=!trabajo.ver_editar>{{trabajo.nombre}} <a href=# ng-click="tipo.editar.trabajos.splice($index, 1)"><span class="glyphicon glyphicon-trash pull-right"></span></a> <a href=# ng-show=trabajo._id ng-click="trabajo.nombre_temp = trabajo.nombre; trabajo.ver_editar = true;"><span class="glyphicon glyphicon-edit pull-right"></span></a></span> <span ng-show=trabajo.ver_editar><div class=form-group><label>Nombre tipo de trabajo <small>requerido</small></label><input class=form-control placeholder="Nombre tipo de trabajo" ng-model=trabajo.nombre_temp></div><button type=button class="btn btn-default" ng-click=guardar_trabajo_editada(trabajo)>Guardar</button> <button type=button class="btn btn-default" ng-click="trabajo.ver_editar = false; trabajo.nombre_temp = \'\';">Cancelar</button></span></li></ul></div><button type=submit class="btn btn-success">Guardar</button> <button type=button class="btn btn-danger" ng-click=cancelar_editar(tipo)>Cancelar</button></form></div></li></ul></div></div></div><footer></footer>'),a.put("components/footer/footer.html","<div class=container><p><a href={{config.url_empresa}} title={{config.glosa_empresa}}>{{config.glosa_empresa}}</a> | <a href={{config.url_aplicacion}} title={{config.glosa_aplicacion}}>{{config.glosa_aplicacion}}</a> | <a href=mailto:{{config.correo_empresa}} title={{config.correo_empresa}}>{{config.correo_empresa}}</a></p></div>"),a.put("components/loading/loading.html",'<div is-loading><div class=container><div class=row><div class=loading-spiner><div class=loading-bokeh><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span></div></div></div></div></div>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-fixed-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Activar menú</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class="navbar-brand logo-menu" rel=home href="/" title=Topair><img src=/assets/images/logo-topair.eed111af.png></a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-show=isAdmin() ui-sref-active=active><a ui-sref=proyectos>Contratos</a></li><li ng-show=isAdmin() ui-sref-active=active><a ui-sref=clientes>Clientes</a></li><li ng-show=isAdmin() ui-sref-active=active><a ui-sref=equipos>Equipos</a></li><li ng-show=isAdmin() ui-sref-active=active><a ui-sref=admin>Usuarios</a></li></ul><ul class="nav navbar-nav navbar-right"><li ng-hide=isLoggedIn() ui-sref-active=active><a ui-sref=login>Entrar</a></li><li ng-show=isLoggedIn()><p class=navbar-text>{{getCurrentUser().name}}</p></li><li ng-show=isLoggedIn() ui-sref-active=active><a ui-sref=settings><span class="glyphicon glyphicon-cog"></span></a></li><li ng-show=isLoggedIn()><a ui-sref=logout>Cerrar sesión</a></li></ul></div></div></div>')}]);